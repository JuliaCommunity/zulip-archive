<html>
<head><meta charset="utf-8"><title>None = Union{} · helpdesk (published) · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/index.html">helpdesk (published)</a></h2>
<h3>Topic: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html">None = Union{}</a></h3>

<hr>

<base href="https://julialang.zulipchat.com">

<head><link href="https://juliacommunity.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="235212380"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235212380" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235212380">(Apr 19 2021 at 16:46)</a>:</h4>
<p>I'm looking at some older code, and I see <code>const None = Union{}</code>. I get the feeling that this originated with some old Julia version. Does anyone know if that was the case?</p>



<a name="235212567"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235212567" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235212567">(Apr 19 2021 at 16:47)</a>:</h4>
<p>Was this an older version of <code>nothing</code> ?</p>



<a name="235218279"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235218279" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235218279">(Apr 19 2021 at 17:28)</a>:</h4>
<p>Hm, I don't know the history here but I assume not. <code>Union{}</code> can't be instantiated as a value whereas <code>Nothing</code> can. That means that <code>Union{}</code> <strong>only</strong> exists as a type level construct</p>



<a name="235218368"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235218368" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235218368">(Apr 19 2021 at 17:29)</a>:</h4>
<p>Nowadays, we call <code>Union{}</code> by the name <code>TupeofBottom</code>, meaning it's the 'bottom' of the type hierarchy (where <code>Any</code> is the top)</p>



<a name="235218808"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235218808" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235218808">(Apr 19 2021 at 17:32)</a>:</h4>
<p><a href="https://github.com/JuliaLang/julia/blob/1b6efc7ab297b7b8aea4d7cb0b52fb589392042b/base/deprecated.jl#L133-L134">https://github.com/JuliaLang/julia/blob/1b6efc7ab297b7b8aea4d7cb0b52fb589392042b/base/deprecated.jl#L133-L134</a></p>



<a name="235218926"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235218926" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235218926">(Apr 19 2021 at 17:33)</a>:</h4>
<p><a href="https://github.com/JuliaLang/julia/blob/dbe775c128a960382e1734a1ad62c09a19e3b592/base/deprecated.jl#L122-L126">https://github.com/JuliaLang/julia/blob/dbe775c128a960382e1734a1ad62c09a19e3b592/base/deprecated.jl#L122-L126</a></p>



<a name="235218972"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235218972" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235218972">(Apr 19 2021 at 17:33)</a>:</h4>
<p>Right, so that shows that <code>None</code> was not an early version of <code>Nothing</code></p>



<a name="235224099"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235224099" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235224099">(Apr 19 2021 at 18:10)</a>:</h4>
<p>Perhaps to be concrete, I'm currently looking at <a href="https://github.com/jheinen/GR.jl/blob/master/src/GR.jl#L250-L253">https://github.com/jheinen/GR.jl/blob/master/src/GR.jl#L250-L253</a> . I'm thinking these globals should be converted to <code>const Ref</code> but I would need a fixed type or a perhaps a <code>Union</code>.</p>



<a name="235243141"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235243141" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235243141">(Apr 19 2021 at 20:25)</a>:</h4>
<p>Yeah, that's tricky. Do you know how many possible types this variable can take on?</p>



<a name="235257151"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235257151" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235257151">(Apr 19 2021 at 22:06)</a>:</h4>
<p>I think most of these could be directly converted to <code>Union{Nothing, String}</code> or <code>Union{Nothing, Int}</code>. In the <code>String</code> case, it looks like we might be able to use empty string. In the Int case, a negative sentinel might work instead.</p>
<p>Perhaps the other question then is how performant is</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="n">r</span> <span class="o">=</span> <span class="kt">Ref</span><span class="p">{</span><span class="kt">Union</span><span class="p">{</span><span class="n">Nothing</span><span class="p">,</span><span class="kt">Int</span><span class="p">}}(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">Base</span><span class="o">.</span><span class="n">RefValue</span><span class="p">{</span><span class="kt">Union</span><span class="p">{</span><span class="n">Nothing</span><span class="p">,</span> <span class="kt">Int64</span><span class="p">}}(</span><span class="mi">5</span><span class="p">)</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">r</span><span class="p">[]</span> <span class="o">=</span> <span class="nb">nothing</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">r</span><span class="p">[]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="mi">5</span>
</code></pre></div>



<a name="235292487"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235292487" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Nybo Nissen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235292487">(Apr 20 2021 at 06:12)</a>:</h4>
<p>It's extremely efficient - usually optimally efficient. Especially when used with heap-allocated structs</p>



<a name="235292504"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235292504" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Nybo Nissen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235292504">(Apr 20 2021 at 06:12)</a>:</h4>
<p>A Union{Nothing, String} takes up only 8 bytes</p>



<a name="235292888"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235292888" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Nybo Nissen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235292888">(Apr 20 2021 at 06:17)</a>:</h4>
<p>And on master, a few important improvements to the compiler means that unions are handled more efficiently. So the only issue is e.g. Union{Int, Nothing} being 16 bytes.</p>



<a name="235344636"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/None%20%3D%20Union%7B%7D/near/235344636" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Nybo Nissen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/None.20.3D.20Union.7B.7D.html#235344636">(Apr 20 2021 at 13:37)</a>:</h4>
<p>Edit: Turns out I was wrong - it's only optimized for bitstypes.</p>



<hr><p>Last updated: Jun 27 2021 at 11:01 UTC</p>
</html>