<html>
<head><meta charset="utf-8"><title>Arrays and custom arrays · helpdesk (published) · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/index.html">helpdesk (published)</a></h2>
<h3>Topic: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Arrays.20and.20custom.20arrays.html">Arrays and custom arrays</a></h3>

<hr>

<base href="https://julialang.zulipchat.com">

<head><link href="https://juliacommunity.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="239592487"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Arrays%20and%20custom%20arrays/near/239592487" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Christ <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Arrays.20and.20custom.20arrays.html#239592487">(May 20 2021 at 13:38)</a>:</h4>
<p>is there an easy way to make arithmetic operations of a subtype of <code>AbstractArray</code> and an <code>Array</code> return the other type and not <code>Array</code>?</p>



<a name="239593108"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Arrays%20and%20custom%20arrays/near/239593108" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Júlio Hoffimann <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Arrays.20and.20custom.20arrays.html#239593108">(May 20 2021 at 13:42)</a>:</h4>
<p>I was looking into it the other day but got busy with other tasks. I think you need to define a method for <code>Base.similar</code> for your array type. See the SparseArray example here: <a href="https://docs.julialang.org/en/v1/manual/interfaces/#man-interface-array">https://docs.julialang.org/en/v1/manual/interfaces/#man-interface-array</a></p>



<a name="239595760"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Arrays%20and%20custom%20arrays/near/239595760" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Christ <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Arrays.20and.20custom.20arrays.html#239595760">(May 20 2021 at 13:59)</a>:</h4>
<p>This indee makes <code>copy</code> work, but e.g. <code>+</code> returns still an array</p>



<a name="239595911"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Arrays%20and%20custom%20arrays/near/239595911" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Christ <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Arrays.20and.20custom.20arrays.html#239595911">(May 20 2021 at 14:00)</a>:</h4>
<p>I guess I'd need promotion rules for that</p>



<a name="239675791"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Arrays%20and%20custom%20arrays/near/239675791" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Abbott <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Arrays.20and.20custom.20arrays.html#239675791">(May 20 2021 at 23:41)</a>:</h4>
<p>One way is to overload broadcasting, that's where <code>A+B</code> goes. I don't think promotion rules get used for arrays, although broadcasting has some similar mechanisms to try to decide who wins.</p>



<a name="240196744"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Arrays%20and%20custom%20arrays/near/240196744" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonnie Diegelman <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Arrays.20and.20custom.20arrays.html#240196744">(May 25 2021 at 14:34)</a>:</h4>
<p>Yeah, it’s best to do it via the broadcasting machinery. I found that trying to handle it directly by dispatch methods is a losing battle due to all the method ambiguities.</p>



<hr><p>Last updated: Mar 02 2026 at 05:32 UTC</p>
</html>