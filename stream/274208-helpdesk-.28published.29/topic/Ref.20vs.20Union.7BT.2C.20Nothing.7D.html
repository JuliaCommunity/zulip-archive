<html>
<head><meta charset="utf-8"><title>Ref vs Union{T, Nothing} · helpdesk (published) · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/index.html">helpdesk (published)</a></h2>
<h3>Topic: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html">Ref vs Union{T, Nothing}</a></h3>

<hr>

<base href="https://julialang.zulipchat.com">

<head><link href="https://juliacommunity.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="543905701"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543905701" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Wrigley <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543905701">(Oct 09 2025 at 08:58)</a>:</h4>
<p>Are there any opinions on whether it's better to use a <code>Ref</code> or <code>Union{T, Nothing}</code> type as a kind of nullable type? I vaguely prefer a union as a matter of style, but maybe Ref's are better for type-stability and error messages. Though one downside of a Ref is that AFAIK there's no way to unassign one.</p>



<a name="543908389"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543908389" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543908389">(Oct 09 2025 at 09:11)</a>:</h4>
<p>I would use a union personally</p>



<a name="543909033"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543909033" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543909033">(Oct 09 2025 at 09:14)</a>:</h4>
<p>I doubt there'd be any real type stability benefits to the <code>Ref</code>, since with the union branch you would always do a</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">isnothing</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>
<span class="w">    </span><span class="n">your_code</span>
<span class="k">else</span>
<span class="w">    </span><span class="n">some_error_branch</span><span class="p">()</span>
<span class="k">end</span>
</code></pre></div>



<a name="543910931"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543910931" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Wrigley <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543910931">(Oct 09 2025 at 09:23)</a>:</h4>
<p>I <em>should</em>, but I admittedly I don't always remember to <span aria-label="peep" class="emoji emoji-1fae3" role="img" title="peep">:peep:</span></p>



<a name="543934176"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543934176" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Nybo Nissen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543934176">(Oct 09 2025 at 11:28)</a>:</h4>
<p>How can a Ref be nullable?</p>



<a name="543935115"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543935115" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Wrigley <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543935115">(Oct 09 2025 at 11:33)</a>:</h4>
<p>As in you can check whether it has a value with <code>isassigned()</code>. And dereferencing an unassigned Ref will immediately throw an exception, which is nice.</p>



<a name="543935436"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543935436" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543935436">(Oct 09 2025 at 11:35)</a>:</h4>
<p>note that will only work for non-isbits types</p>



<a name="543935503"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543935503" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543935503">(Oct 09 2025 at 11:35)</a>:</h4>
<div class="codehilite" data-code-language="Julia console"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">Ref</span><span class="p">{</span><span class="kt">Int</span><span class="p">}()</span>
<span class="go">Base.RefValue{Int64}(140383053485888)</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">isassigned</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">true</span>
</code></pre></div>



<a name="543935558"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543935558" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Wrigley <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543935558">(Oct 09 2025 at 11:36)</a>:</h4>
<p>Ugh true, I forgot about that.</p>



<a name="543937264"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543937264" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Nybo Nissen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543937264">(Oct 09 2025 at 11:46)</a>:</h4>
<p>Also you can't un-assign a Ref (if you need to)</p>



<a name="543937273"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543937273" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Nybo Nissen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543937273">(Oct 09 2025 at 11:46)</a>:</h4>
<p>Just use Union <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="543995565"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/543995565" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#543995565">(Oct 09 2025 at 15:49)</a>:</h4>
<p>I usually prefer <code>Union{Some{T}, Nothing}</code>, since that forces me to handle it and I can't forget about it anymore. The downside is that it peppers my code with <code>@something (..) throw(...)</code> to handle the <code>Nothing</code>s</p>



<a name="544022549"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/544022549" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Lapeyre <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#544022549">(Oct 09 2025 at 18:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306754">Sukera</span> <a href="#narrow/channel/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D/near/543995565">said</a>:</p>
<blockquote>
<p>The downside is that it peppers my code</p>
</blockquote>
<p>This is the problem with the "make Julia more like Rust" program.</p>



<a name="544041144"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/544041144" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#544041144">(Oct 09 2025 at 20:21)</a>:</h4>
<p>Not sure what this has to do with Rust, this is just the cost of checking my callsites &amp; the lack of syntax support for this in Julia. I personally don't mind this downside at all, because I can rest assured that I have checked every error path <img alt=":shrugging:" class="emoji" src="https://avatars.zulip.com/7178/emoji/images/2366215e.gif" title="shrugging"></p>



<a name="544067387"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Ref%20vs%20Union%7BT%2C%20Nothing%7D/near/544067387" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Lapeyre <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Ref.20vs.20Union.7BT.2C.20Nothing.7D.html#544067387">(Oct 10 2025 at 00:43)</a>:</h4>
<p>I'm not saying that checking every error path is bad or that doing it with <code>Union{Some{T}, Nothing}</code> is bad. If you went through a Julia program and did this everywhere, you'd probably have a more reliable program. It would also look more like rust code than it did before you made the change.</p>



<hr><p>Last updated: Mar 02 2026 at 05:32 UTC</p>
</html>