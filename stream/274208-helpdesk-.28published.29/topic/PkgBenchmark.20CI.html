<html>
<head><meta charset="utf-8"><title>PkgBenchmark CI · helpdesk (published) · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/index.html">helpdesk (published)</a></h2>
<h3>Topic: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html">PkgBenchmark CI</a></h3>

<hr>

<base href="https://julialang.zulipchat.com">

<head><link href="https://juliacommunity.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="261529991"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261529991" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261529991">(Nov 15 2021 at 17:26)</a>:</h4>
<p>Anyone familiar with running benchmarks for a package in CI? Possibly using PkgBenchmark, open to custom solutions</p>



<a name="261530243"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261530243" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261530243">(Nov 15 2021 at 17:28)</a>:</h4>
<p>alternatively, in which environment am I supposed to install PkgBenchmark? I don't really want to make it a dependency for my package and giving it its own (sub-)environment seems to break things.</p>



<a name="261530319"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261530319" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261530319">(Nov 15 2021 at 17:28)</a>:</h4>
<p>also, does it play well with unregistered dependencies?</p>



<a name="261590612"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261590612" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mosè Giordano <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261590612">(Nov 16 2021 at 02:34)</a>:</h4>
<p>You should have it in a separate environment: <a href="https://github.com/JuliaPhysics/Measurements.jl/tree/ba56443c23bed16fc6e4e8e87c3b12c835f00edb/benchmark">https://github.com/JuliaPhysics/Measurements.jl/tree/ba56443c23bed16fc6e4e8e87c3b12c835f00edb/benchmark</a> it works for me also with unregistered packages.</p>
<p>My only problem is that results are often totally unreliable, I tend to blame github actions machines, but the performance reports I get are usually garbage</p>



<a name="261597534"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261597534" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kwaku Oskin <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261597534">(Nov 16 2021 at 04:44)</a>:</h4>
<p>That's correct, you need separate environment, and may be tweak your yml configs, for it to run properly. Results are mostly garbage, that's also true :-)</p>
<p>Here is our setup, which uses <a href="https://github.com/search?q=BenchmarkCI.jl&amp;type=Repositories">BenchmarkCI.jl</a></p>
<p><a href="https://github.com/PyDataBlog/ParallelKMeans.jl/tree/master/benchmark">https://github.com/PyDataBlog/ParallelKMeans.jl/tree/master/benchmark</a></p>



<a name="261607801"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261607801" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261607801">(Nov 16 2021 at 07:59)</a>:</h4>
<p>If CI is not reliable due to machine differences, that's fine for me - having a way to not have PkgBenchmark/BenchmarkCI in the main dependencies is the main concern, thank you both!</p>



<a name="261608346"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261608346" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261608346">(Nov 16 2021 at 08:05)</a>:</h4>
<p>so presumably, if I run the benchmarks on my/a custom fixed machine, the benchmarks should be more reliable</p>



<a name="261715903"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261715903" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takafumi Arakaki (tkf) <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261715903">(Nov 16 2021 at 22:23)</a>:</h4>
<p>FWIW, I'm now shifted to only running smoke tests for benchmarks in newer projects.</p>
<p>I reduce the number of evaluations as much as possible for "smoke run"<br>
<a href="https://github.com/JuliaConcurrent/ConcurrentCollections.jl/blob/7c3d94b24a36506e2d84161648b95ecf116312bb/benchmark/ConcurrentCollectionsBenchmarks/src/ConcurrentCollectionsBenchmarks.jl#L23-L43">https://github.com/JuliaConcurrent/ConcurrentCollections.jl/blob/7c3d94b24a36506e2d84161648b95ecf116312bb/benchmark/ConcurrentCollectionsBenchmarks/src/ConcurrentCollectionsBenchmarks.jl#L23-L43</a></p>
<p>...and then run it via test suite<br>
<a href="https://github.com/JuliaConcurrent/ConcurrentCollections.jl/blob/master/test/ConcurrentCollectionsTests/src/test_bench_smoke.jl#L6-L14">https://github.com/JuliaConcurrent/ConcurrentCollections.jl/blob/master/test/ConcurrentCollectionsTests/src/test_bench_smoke.jl#L6-L14</a></p>



<a name="261716216"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261716216" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261716216">(Nov 16 2021 at 22:25)</a>:</h4>
<p>yeah I expect my benchmarks to be fairly long running (think ms-s range per evaluation)</p>



<a name="261716302"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261716302" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261716302">(Nov 16 2021 at 22:26)</a>:</h4>
<p>if it turns out to be super unstable, I don't mind running them on a machine I control</p>



<a name="261716356"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261716356" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261716356">(Nov 16 2021 at 22:26)</a>:</h4>
<p>thanks for that idea though, may be helpful!</p>



<a name="261716363"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261716363" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takafumi Arakaki (tkf) <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261716363">(Nov 16 2021 at 22:26)</a>:</h4>
<p>I want to make benchmarks more reliable on CI, though. I've been wanting to look into Cachegrind for a reliable benchmark CI <a href="https://pythonspeed.com/articles/consistent-benchmarking-in-ci/">https://pythonspeed.com/articles/consistent-benchmarking-in-ci/</a> I wonder if anyone looked into it?</p>



<a name="261716983"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261716983" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261716983">(Nov 16 2021 at 22:31)</a>:</h4>
<p>I didn't even think of cachegrind, that's a good idea</p>



<a name="261717054"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261717054" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261717054">(Nov 16 2021 at 22:32)</a>:</h4>
<p>probably not suited to julia as-is though, as valgrind requires some setup iirc</p>



<a name="261717078"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261717078" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261717078">(Nov 16 2021 at 22:32)</a>:</h4>
<p><a href="https://docs.julialang.org/en/v1/devdocs/valgrind/">https://docs.julialang.org/en/v1/devdocs/valgrind/</a></p>



<a name="261717158"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261717158" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261717158">(Nov 16 2021 at 22:32)</a>:</h4>
<p>however, we may be able to use llvm-mca for a similar effect</p>



<a name="261717211"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261717211" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261717211">(Nov 16 2021 at 22:33)</a>:</h4>
<p>it doesn't know about caches though :/</p>



<a name="261717338"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261717338" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261717338">(Nov 16 2021 at 22:34)</a>:</h4>
<p>another possible problem may be variance in how the CI machine actually looks CPU and cache-wise</p>



<a name="261717878"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261717878" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261717878">(Nov 16 2021 at 22:39)</a>:</h4>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="p">[</span><span class="n">sukera</span><span class="nd">@tempman</span> <span class="o">~</span><span class="p">]</span><span class="o">$</span> <span class="n">valgrind</span> <span class="o">--</span><span class="n">smc</span><span class="o">-</span><span class="n">check</span><span class="o">=</span><span class="n">all</span><span class="o">-</span><span class="n">non</span><span class="o">-</span><span class="n">file</span> <span class="o">--</span><span class="n">tool</span><span class="o">=</span><span class="n">cachegrind</span> <span class="n">julia</span> <span class="o">-</span><span class="n">e</span> <span class="err">'</span><span class="k">for</span> <span class="n">_</span> <span class="k">in</span> <span class="mi">1</span><span class="o">:</span><span class="mi">10</span> <span class="n">println</span><span class="p">(</span><span class="nb">stdout</span><span class="p">,</span> <span class="s">"hello"</span><span class="p">)</span> <span class="k">end</span><span class="o">'</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">Cachegrind</span><span class="p">,</span> <span class="n">a</span> <span class="n">cache</span> <span class="n">and</span> <span class="n">branch</span><span class="o">-</span><span class="n">prediction</span> <span class="n">profiler</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="mi">2002</span><span class="o">-</span><span class="mi">2017</span><span class="p">,</span> <span class="n">and</span> <span class="n">GNU</span> <span class="n">GPL</span><span class="o">'</span><span class="n">d</span><span class="p">,</span> <span class="n">by</span> <span class="n">Nicholas</span> <span class="n">Nethercote</span> <span class="n">et</span> <span class="n">al</span><span class="o">.</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">Using</span> <span class="n">Valgrind</span><span class="o">-</span><span class="mf">3.17.0</span> <span class="n">and</span> <span class="n">LibVEX</span><span class="p">;</span> <span class="n">rerun</span> <span class="n">with</span> <span class="o">-</span><span class="n">h</span> <span class="k">for</span> <span class="n">copyright</span> <span class="n">info</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">Command</span><span class="o">:</span> <span class="n">julia</span> <span class="o">-</span><span class="n">e</span> <span class="k">for</span><span class="o">\</span> <span class="n">_</span><span class="o">\</span> <span class="k">in</span><span class="o">\</span> <span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="o">\</span> <span class="n">println</span><span class="p">(</span><span class="nb">stdout</span><span class="p">,</span><span class="o">\</span> <span class="s">"hello"</span><span class="p">)</span><span class="o">\</span> <span class="k">end</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span>
<span class="o">--</span><span class="mi">337656</span><span class="o">--</span> <span class="n">warning</span><span class="o">:</span> <span class="n">L3</span> <span class="n">cache</span> <span class="n">found</span><span class="p">,</span> <span class="k">using</span> <span class="n">its</span> <span class="n">data</span> <span class="k">for</span> <span class="n">the</span> <span class="n">LL</span> <span class="n">simulation</span><span class="o">.</span>
<span class="n">ERROR</span><span class="o">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">compatible</span> <span class="n">target</span> <span class="k">in</span> <span class="n">system</span> <span class="n">image</span><span class="o">.</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">I</span>   <span class="n">refs</span><span class="o">:</span>      <span class="mi">102</span><span class="p">,</span><span class="mi">539</span><span class="p">,</span><span class="mi">492</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">I1</span>  <span class="n">misses</span><span class="o">:</span>         <span class="mi">18</span><span class="p">,</span><span class="mi">030</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">LLi</span> <span class="n">misses</span><span class="o">:</span>         <span class="mi">14</span><span class="p">,</span><span class="mi">960</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">I1</span>  <span class="n">miss</span> <span class="n">rate</span><span class="o">:</span>        <span class="mf">0.02</span><span class="o">%</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">LLi</span> <span class="n">miss</span> <span class="n">rate</span><span class="o">:</span>        <span class="mf">0.01</span><span class="o">%</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">D</span>   <span class="n">refs</span><span class="o">:</span>       <span class="mi">32</span><span class="p">,</span><span class="mi">186</span><span class="p">,</span><span class="mi">907</span>  <span class="p">(</span><span class="mi">23</span><span class="p">,</span><span class="mi">929</span><span class="p">,</span><span class="mi">774</span> <span class="n">rd</span>   <span class="o">+</span> <span class="mi">8</span><span class="p">,</span><span class="mi">257</span><span class="p">,</span><span class="mi">133</span> <span class="n">wr</span><span class="p">)</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">D1</span>  <span class="n">misses</span><span class="o">:</span>        <span class="mi">780</span><span class="p">,</span><span class="mi">973</span>  <span class="p">(</span>   <span class="mi">709</span><span class="p">,</span><span class="mi">078</span> <span class="n">rd</span>   <span class="o">+</span>    <span class="mi">71</span><span class="p">,</span><span class="mi">895</span> <span class="n">wr</span><span class="p">)</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">LLd</span> <span class="n">misses</span><span class="o">:</span>        <span class="mi">190</span><span class="p">,</span><span class="mi">592</span>  <span class="p">(</span>   <span class="mi">131</span><span class="p">,</span><span class="mi">846</span> <span class="n">rd</span>   <span class="o">+</span>    <span class="mi">58</span><span class="p">,</span><span class="mi">746</span> <span class="n">wr</span><span class="p">)</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">D1</span>  <span class="n">miss</span> <span class="n">rate</span><span class="o">:</span>         <span class="mf">2.4</span><span class="o">%</span> <span class="p">(</span>       <span class="mf">3.0</span><span class="o">%</span>     <span class="o">+</span>       <span class="mf">0.9</span><span class="o">%</span>  <span class="p">)</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">LLd</span> <span class="n">miss</span> <span class="n">rate</span><span class="o">:</span>         <span class="mf">0.6</span><span class="o">%</span> <span class="p">(</span>       <span class="mf">0.6</span><span class="o">%</span>     <span class="o">+</span>       <span class="mf">0.7</span><span class="o">%</span>  <span class="p">)</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">LL</span> <span class="n">refs</span><span class="o">:</span>           <span class="mi">799</span><span class="p">,</span><span class="mi">003</span>  <span class="p">(</span>   <span class="mi">727</span><span class="p">,</span><span class="mi">108</span> <span class="n">rd</span>   <span class="o">+</span>    <span class="mi">71</span><span class="p">,</span><span class="mi">895</span> <span class="n">wr</span><span class="p">)</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">LL</span> <span class="n">misses</span><span class="o">:</span>         <span class="mi">205</span><span class="p">,</span><span class="mi">552</span>  <span class="p">(</span>   <span class="mi">146</span><span class="p">,</span><span class="mi">806</span> <span class="n">rd</span>   <span class="o">+</span>    <span class="mi">58</span><span class="p">,</span><span class="mi">746</span> <span class="n">wr</span><span class="p">)</span>
<span class="o">==</span><span class="mi">337656</span><span class="o">==</span> <span class="n">LL</span> <span class="n">miss</span> <span class="n">rate</span><span class="o">:</span>          <span class="mf">0.2</span><span class="o">%</span> <span class="p">(</span>       <span class="mf">0.1</span><span class="o">%</span>     <span class="o">+</span>       <span class="mf">0.7</span><span class="o">%</span>  <span class="p">)</span>
</code></pre></div>
<p>haha nope, I don't think julia likes the virtual CPU cachgrind presents <span aria-label="laughter tears" class="emoji emoji-1f602" role="img" title="laughter tears">:laughter_tears:</span></p>



<a name="261724176"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261724176" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takafumi Arakaki (tkf) <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261724176">(Nov 16 2021 at 23:40)</a>:</h4>
<p>Yeah, CPU detection in Julia feels like a big maze to me.</p>



<a name="261724260"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261724260" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takafumi Arakaki (tkf) <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261724260">(Nov 16 2021 at 23:40)</a>:</h4>
<p>I wonder if you can use <code>julia --cpu-target=...</code> to get around this though?</p>



<a name="261724322"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261724322" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261724322">(Nov 16 2021 at 23:41)</a>:</h4>
<p>what to use as <code>--cpu-target</code> though?</p>



<a name="261724448"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261724448" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261724448">(Nov 16 2021 at 23:42)</a>:</h4>
<p>hm, simply setting it so <code>skylake</code> (my CPU) didn't work, same result</p>



<a name="261725289"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261725289" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takafumi Arakaki (tkf) <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261725289">(Nov 16 2021 at 23:47)</a>:</h4>
<p>Maybe <code>haswell</code>? I guess we'd want to specify x86-64-v3 but it looks like it's not in the list of LLVM.</p>



<a name="261725310"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/PkgBenchmark%20CI/near/261725310" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/PkgBenchmark.20CI.html#261725310">(Nov 16 2021 at 23:47)</a>:</h4>
<p>well I checked with <code>--cpu-target=help</code> first to see if <code>skylake</code> was valid</p>



<hr><p>Last updated: Mar 02 2026 at 05:32 UTC</p>
</html>