<html>
<head><meta charset="utf-8"><title>Matlab interp3/slice · helpdesk (published) · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/index.html">helpdesk (published)</a></h2>
<h3>Topic: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html">Matlab interp3/slice</a></h3>

<hr>

<base href="https://julialang.zulipchat.com">

<head><link href="https://juliacommunity.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="277553240"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/277553240" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#277553240">(Apr 02 2022 at 21:40)</a>:</h4>
<p>Does anyone know a seamless way to reimplement this <a href="https://www.mathworks.com/help/matlab/ref/interp3.html"><code>interp3()</code></a> functionality in julia, specifically with the syntax as the first example below?</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">Vq</span> <span class="o">=</span> <span class="n">interp3</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span><span class="p">,</span><span class="n">V</span><span class="p">,</span><span class="n">Xq</span><span class="p">,</span><span class="n">Yq</span><span class="p">,</span><span class="n">Zq</span><span class="p">)</span>
</code></pre></div>



<a name="277662533"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/277662533" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#277662533">(Apr 03 2022 at 21:41)</a>:</h4>
<p>Or if this <a href="https://www.mathworks.com/help/matlab/ref/slice.html"><code>slice()</code></a> functionality has a julia equivalent, that would be better/easier  <code>slice(X,Y,Z,V,xslice,yslice,zslice)</code></p>



<a name="277678540"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/277678540" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benoit Pasquier <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#277678540">(Apr 04 2022 at 03:45)</a>:</h4>
<p>Doesn't <a href="https://github.com/search?q=Interpolations.jl&amp;type=Repositories">Interpolations.jl</a> do the trick?</p>



<a name="277793816"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/277793816" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#277793816">(Apr 04 2022 at 21:07)</a>:</h4>
<p>Ahh okay, it does look like that's what I am after. I am just now realizing that it's not the missing functionality but that I don't quite understand my problem as well as I should. Are there any examples of multi-planar reformation in Julia that you know of because I haven't found any from the simple google searches and that's what I need</p>



<a name="277819479"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/277819479" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benoit Pasquier <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#277819479">(Apr 05 2022 at 02:12)</a>:</h4>
<p>Not sure what that is but if  I understand it's just an interpolation? If you have your <code>X</code> ,<code>Y</code>, <code>Z</code>, <code>V</code>, <code>Xq</code>, <code>Yq</code>,  and <code>Zq</code> you should be able to just make the interpolation with the <a href="https://github.com/search?q=Interpolations.jl&amp;type=Repositories">Interpolations.jl</a> package, right? Maybe make a small example of these and try to create the slices you're looking for?</p>



<a name="277902381"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/277902381" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#277902381">(Apr 05 2022 at 16:03)</a>:</h4>
<p>I guess I am confused about how <a href="https://github.com/search?q=Interpolations.jl&amp;type=Repositories">Interpolations.jl</a> takes in all of the arguments <code>X</code>, <code>Y</code>, <code>Z</code>, <code>V</code>, <code>Xq</code>, <code>Yq</code>, <code>Zq</code>? For example</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">itp</span> <span class="o">=</span> <span class="n">interpolate</span><span class="p">(</span><span class="n">Xs</span><span class="p">,</span> <span class="n">Ys</span><span class="p">,</span> <span class="n">Zs</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">BSpline</span><span class="p">(</span><span class="n">Linear</span><span class="p">()))</span>
<span class="n">itp</span><span class="p">(</span><span class="n">Xq</span><span class="p">,</span> <span class="n">Yq</span><span class="p">,</span> <span class="n">Zq</span><span class="p">)</span>
</code></pre></div>
<p>Doesn't work and I can't figure out what order of arguments I should be using if <code>X</code> <code>Y``Z</code> are the points and <code>Xq</code>, <code>Yq</code>, <code>Zq</code> are the query points</p>



<a name="277902509"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/277902509" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#277902509">(Apr 05 2022 at 16:04)</a>:</h4>
<p>This is the error I get if this is helpful btw</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="kt">MethodError</span><span class="o">:</span> <span class="n">no</span> <span class="n">method</span> <span class="n">matching</span> <span class="n">interpolate</span><span class="p">(</span><span class="o">::</span><span class="kt">Array</span><span class="p">{</span><span class="kt">Float64</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="o">::</span><span class="kt">Array</span><span class="p">{</span><span class="kt">Float64</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="o">::</span><span class="kt">Array</span><span class="p">{</span><span class="kt">Float64</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="o">::</span><span class="kt">Array</span><span class="p">{</span><span class="kt">Int16</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="o">::</span><span class="kt">Interpolations</span><span class="o">.</span><span class="kt">BSpline</span><span class="p">{</span><span class="kt">Interpolations</span><span class="o">.</span><span class="kt">Linear</span><span class="p">{</span><span class="kt">Interpolations</span><span class="o">.</span><span class="kt">Throw</span><span class="p">{</span><span class="kt">Interpolations</span><span class="o">.</span><span class="kt">OnGrid</span><span class="p">}}})</span>

<span class="n">Closest</span> <span class="n">candidates</span> <span class="n">are</span><span class="o">:</span>

<span class="n">interpolate</span><span class="p">(</span><span class="o">::</span><span class="kt">AbstractArray</span><span class="p">,</span> <span class="o">!</span><span class="n">Matched</span><span class="o">::</span><span class="kt">Interpolations</span><span class="o">.</span><span class="n">NoInterp</span><span class="p">)</span> <span class="n">at</span> <span class="o">~/.</span><span class="n">julia</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">Interpolations</span><span class="o">/</span><span class="n">Glp9h</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">nointerp</span><span class="o">/</span><span class="n">nointerp</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">1</span>

<span class="n">interpolate</span><span class="p">(</span><span class="o">!</span><span class="n">Matched</span><span class="o">::</span><span class="kt">Type</span><span class="p">{</span><span class="kt">TWeights</span><span class="p">},</span> <span class="o">!</span><span class="n">Matched</span><span class="o">::</span><span class="kt">Type</span><span class="p">{</span><span class="kt">TC</span><span class="p">},</span> <span class="o">::</span><span class="kt">Any</span><span class="p">,</span> <span class="o">!</span><span class="n">Matched</span><span class="o">::</span><span class="kt">IT</span><span class="p">)</span> <span class="k">where</span> <span class="p">{</span><span class="kt">TWeights</span><span class="p">,</span> <span class="kt">TC</span><span class="p">,</span> <span class="kt">IT</span><span class="o">&lt;:</span><span class="kt">Union</span><span class="p">{</span><span class="kt">Interpolations</span><span class="o">.</span><span class="kt">NoInterp</span><span class="p">,</span> <span class="kt">Tuple</span><span class="p">{</span><span class="kt">Vararg</span><span class="p">{</span><span class="kt">Union</span><span class="p">{</span><span class="kt">Interpolations</span><span class="o">.</span><span class="kt">NoInterp</span><span class="p">,</span> <span class="kt">Interpolations</span><span class="o">.</span><span class="kt">BSpline</span><span class="p">}}},</span> <span class="kt">Interpolations</span><span class="o">.</span><span class="kt">BSpline</span><span class="p">}}</span> <span class="n">at</span> <span class="o">~/.</span><span class="n">julia</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">Interpolations</span><span class="o">/</span><span class="n">Glp9h</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">b</span><span class="o">-</span><span class="n">splines</span><span class="o">/</span><span class="n">b</span><span class="o">-</span><span class="n">splines</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">159</span>

<span class="n">interpolate</span><span class="p">(</span><span class="o">!</span><span class="n">Matched</span><span class="o">::</span><span class="kt">Type</span><span class="p">{</span><span class="kt">TWeights</span><span class="p">},</span> <span class="o">!</span><span class="n">Matched</span><span class="o">::</span><span class="kt">Type</span><span class="p">{</span><span class="kt">TC</span><span class="p">},</span> <span class="o">::</span><span class="kt">Any</span><span class="p">,</span> <span class="o">!</span><span class="n">Matched</span><span class="o">::</span><span class="kt">IT</span><span class="p">,</span> <span class="o">!</span><span class="n">Matched</span><span class="o">::</span><span class="kt">Real</span><span class="p">,</span> <span class="o">!</span><span class="n">Matched</span><span class="o">::</span><span class="kt">Int64</span><span class="p">)</span> <span class="k">where</span> <span class="p">{</span><span class="kt">TWeights</span><span class="p">,</span> <span class="kt">TC</span><span class="p">,</span> <span class="kt">IT</span><span class="o">&lt;:</span><span class="kt">Union</span><span class="p">{</span><span class="kt">Interpolations</span><span class="o">.</span><span class="kt">NoInterp</span><span class="p">,</span> <span class="kt">Tuple</span><span class="p">{</span><span class="kt">Vararg</span><span class="p">{</span><span class="kt">Union</span><span class="p">{</span><span class="kt">Interpolations</span><span class="o">.</span><span class="kt">NoInterp</span><span class="p">,</span> <span class="kt">Interpolations</span><span class="o">.</span><span class="kt">BSpline</span><span class="p">}}},</span> <span class="kt">Interpolations</span><span class="o">.</span><span class="kt">BSpline</span><span class="p">}}</span> <span class="n">at</span> <span class="o">~/.</span><span class="n">julia</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">Interpolations</span><span class="o">/</span><span class="n">Glp9h</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">b</span><span class="o">-</span><span class="n">splines</span><span class="o">/</span><span class="n">b</span><span class="o">-</span><span class="n">splines</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">164</span>

<span class="o">...</span>

<span class="n">PlanarReformation</span><span class="p">(</span><span class="o">::</span><span class="kt">Array</span><span class="p">{</span><span class="kt">Int16</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="o">::</span><span class="kt">Vector</span><span class="p">{</span><span class="kt">Float64</span><span class="p">},</span> <span class="o">::</span><span class="kt">Matrix</span><span class="p">{</span><span class="kt">Float64</span><span class="p">},</span> <span class="o">::</span><span class="kt">Matrix</span><span class="p">{</span><span class="kt">Float64</span><span class="p">},</span> <span class="o">::</span><span class="kt">Float64</span><span class="p">,</span> <span class="o">::</span><span class="kt">Float64</span><span class="p">)</span><span class="nd">@Other</span><span class="o">:</span> <span class="mi">15</span>
<span class="n">top</span><span class="o">-</span><span class="n">level</span> <span class="n">scope</span><span class="nd">@Local</span><span class="o">:</span> <span class="mi">1</span><span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
</code></pre></div>



<a name="277962454"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/277962454" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benoit Pasquier <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#277962454">(Apr 06 2022 at 00:40)</a>:</h4>
<p><span class="user-mention" data-user-id="269582">@Mark Kittisopikul</span>  maybe the docs need a 2D and 3D examples?</p>



<a name="277962501"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/277962501" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benoit Pasquier <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#277962501">(Apr 06 2022 at 00:41)</a>:</h4>
<p>Otherwise, does this work for you?</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">y</span><span class="p">))</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">z</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="nb">π</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">range</span><span class="p">(</span><span class="o">-</span><span class="nb">π</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nb">π</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">zs</span> <span class="o">=</span> <span class="n">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="k">in</span> <span class="n">xs</span><span class="p">,</span> <span class="n">y</span> <span class="k">in</span> <span class="n">ys</span><span class="p">,</span> <span class="n">z</span> <span class="k">in</span> <span class="n">zs</span><span class="p">]</span>
<span class="n">itp</span> <span class="o">=</span> <span class="n">interpolate</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="n">BSpline</span><span class="p">(</span><span class="n">Linear</span><span class="p">()))</span> <span class="c"># interpolate linearly between the data points</span>
<span class="n">stp</span> <span class="o">=</span> <span class="n">scale</span><span class="p">(</span><span class="n">itp</span><span class="p">,</span> <span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">zs</span><span class="p">)</span> <span class="c"># re-scale to the actual domain</span>
<span class="p">[</span><span class="n">itp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="k">in</span> <span class="n">Xq</span><span class="p">,</span> <span class="n">y</span> <span class="k">in</span> <span class="n">Yq</span><span class="p">,</span> <span class="n">z</span> <span class="k">in</span> <span class="n">Zq</span><span class="p">]</span> <span class="c"># &lt;- make your own Xq, Yq, Zq here</span>
</code></pre></div>



<a name="279320688"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279320688" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279320688">(Apr 18 2022 at 18:59)</a>:</h4>
<p>Sorry for such a late response, I had some important deadlines. This example is super helpful and should be enough to help me get started I think!</p>



<a name="279349843"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279349843" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279349843">(Apr 19 2022 at 00:12)</a>:</h4>
<p>Okay, so in the MatLab function, I can use 3 different 3D arrays as the sample points (<code>Xs</code> <code>Ys</code> and <code>Zs</code>) along with a 3D array <code>V</code>. <a href="https://github.com/search?q=Interpolations.jl&amp;type=Repositories">Interpolations.jl</a> doesn't like this</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">Xs</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">Ys</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">Zs</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>

<span class="n">V</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
</code></pre></div>
<p>So if I have those arrays, is there a way to pass them into the <code>interpolate</code> function that makes sense? In matlab its just <code>interp3(Xs, Ys, Zs, V, ...)</code> which is what I am hoping to recreate in Julia</p>



<a name="279350625"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279350625" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279350625">(Apr 19 2022 at 00:25)</a>:</h4>
<p>It looks like the <code>interp3</code> in MatLab takes the first 4 arguments <code>Xs</code>, <code>Ys</code>, <code>Zs</code> and <code>V</code> and then uses <a href="https://www.mathworks.com/help/matlab/ref/griddedinterpolant.html#d123e568858">griddedInterpolant</a> to create a new interpolant <code>F</code> so I will look into that step first using <a href="https://github.com/search?q=Interpolations.jl&amp;type=Repositories">Interpolations.jl</a></p>



<a name="279366385"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279366385" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benoit Pasquier <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279366385">(Apr 19 2022 at 05:56)</a>:</h4>
<p>Are you using a regular grid? This surely error in MATLAB too:</p>
<div class="codehilite" data-code-language="Matlab"><pre><span></span><code><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Xs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w"></span>
<span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Ys</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w"></span>
<span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Zs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w"></span>
<span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Vs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w"></span>
<span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Xq</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span><span class="w"></span>
<span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Yq</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span><span class="w"></span>
<span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Zq</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span><span class="w"></span>
<span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Vq</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">interp3</span><span class="p">(</span><span class="n">Xs</span><span class="p">,</span><span class="w"> </span><span class="n">Ys</span><span class="p">,</span><span class="w"> </span><span class="n">Zs</span><span class="p">,</span><span class="w"> </span><span class="n">Vs</span><span class="p">,</span><span class="w"> </span><span class="n">Xq</span><span class="p">,</span><span class="w"> </span><span class="n">Yq</span><span class="p">,</span><span class="w"> </span><span class="n">Zq</span><span class="p">);</span><span class="w"></span>
<span class="n">Error</span><span class="w"> </span><span class="s">using</span><span class="w"> </span><span class="s">griddedInterpolant</span><span class="w"></span>
<span class="n">Grid</span><span class="w"> </span><span class="s">arrays</span><span class="w"> </span><span class="s">must</span><span class="w"> </span><span class="s">have</span><span class="w"> </span><span class="s">NDGRID</span><span class="w"> </span><span class="s">structure.</span><span class="w"></span>

<span class="n">Error</span><span class="w"> </span><span class="s">in</span><span class="w"> </span><span class="s">interp3</span><span class="w"> </span><span class="s">(line</span><span class="w"> </span><span class="s">144)</span><span class="w"></span>
<span class="w">            </span><span class="n">F</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">griddedInterpolant</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p">,</span><span class="w"> </span><span class="n">Z</span><span class="p">,</span><span class="w"> </span><span class="n">V</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="p">,</span><span class="n">extrap</span><span class="p">);</span><span class="w"></span>
</code></pre></div>



<a name="279366418"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279366418" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benoit Pasquier <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279366418">(Apr 19 2022 at 05:57)</a>:</h4>
<p>If your grid is regular, then no need to have full 3D arrays for x, y, and y: A vector suffices for each.</p>



<a name="279366501"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279366501" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benoit Pasquier <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279366501">(Apr 19 2022 at 05:59)</a>:</h4>
<p>Can you make a copy-pastable minimal working example (MWE) of MATLAB code that does not error? And then we can see if we can do the same with <a href="https://github.com/search?q=Interpolations.jl&amp;type=Repositories">Interpolations.jl</a> <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="279432480"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279432480" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279432480">(Apr 19 2022 at 16:19)</a>:</h4>
<p>Here is a MWE in MatLab that I would like to reimplement in Julia</p>
<div class="codehilite" data-code-language="Matlab"><pre><span></span><code><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">Xs</span><span class="p">,</span><span class="w"> </span><span class="n">Ys</span><span class="p">,</span><span class="w"> </span><span class="n">Zs</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">meshgrid</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">56</span><span class="p">);</span><span class="w"></span>
<span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">rand</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">56</span><span class="p">);</span><span class="w"></span>
<span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">plane_list</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">rand</span><span class="p">(</span><span class="mi">4225</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"></span>
<span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">plane</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">interp3</span><span class="p">(</span><span class="n">Xs</span><span class="p">,</span><span class="w"> </span><span class="n">Ys</span><span class="p">,</span><span class="w"> </span><span class="n">Zs</span><span class="p">,</span><span class="w"> </span><span class="n">V</span><span class="p">,</span><span class="w"> </span><span class="n">plane_list</span><span class="p">(:,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">plane_list</span><span class="p">(:,</span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="n">plane_list</span><span class="p">(:,</span><span class="mi">3</span><span class="p">));</span><span class="w"></span>

<span class="c">% Result: size(plane) = 4225 x 1</span><span class="w"></span>
</code></pre></div>



<a name="279432762"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279432762" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279432762">(Apr 19 2022 at 16:21)</a>:</h4>
<p>But it seems like the problem is coming from my misunderstanding of the regular grid usage in Julia?</p>



<a name="279434129"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279434129" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279434129">(Apr 19 2022 at 16:30)</a>:</h4>
<p>What do you mean a vector will suffice for 3D regular grids? Is it something like this?</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">V</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="n">size</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="n">size</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="n">size</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">itp</span> <span class="o">=</span> <span class="n">interpolate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">Gridded</span><span class="p">(</span><span class="n">Linear</span><span class="p">()))</span>
</code></pre></div>
<p>If so, that still isn't working (if I am even doing it right)</p>



<a name="279434235"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279434235" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279434235">(Apr 19 2022 at 16:31)</a>:</h4>
<p>Nor is this</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">V</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">collect</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="n">size</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">collect</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="n">size</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">collect</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="n">size</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">itp</span> <span class="o">=</span> <span class="n">interpolate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">Gridded</span><span class="p">(</span><span class="n">Linear</span><span class="p">()))</span>
</code></pre></div>



<a name="279525115"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279525115" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nils <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279525115">(Apr 20 2022 at 10:37)</a>:</h4>
<p>Have you looked at the <a href="https://github.com/search?q=Interpolations.jl&amp;type=Repositories">Interpolations.jl</a> docs? Specifically those on gridded interpolation <a href="http://juliamath.github.io/Interpolations.jl/latest/control/#Gridded-interpolation">here</a>? Quoting from there:</p>
<blockquote>
<p>The general syntax is</p>
<p><code>itp = interpolate(nodes, A, options...)</code></p>
<p>where <code>nodes = (xnodes, ynodes, ...)</code> specifies the positions along each axis at which the array <code>A</code> is sampled for arbitrary ("rectangular") samplings.</p>
</blockquote>



<a name="279525199"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279525199" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nils <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279525199">(Apr 20 2022 at 10:38)</a>:</h4>
<p>In your case:</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="n">itp</span> <span class="o">=</span> <span class="n">interpolate</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span> <span class="n">V</span><span class="p">,</span> <span class="n">Gridded</span><span class="p">(</span><span class="n">Linear</span><span class="p">()));</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">itp</span><span class="p">(</span><span class="mf">2.3</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">11.7</span><span class="p">)</span>
<span class="mf">0.5487285843274945</span>
</code></pre></div>



<a name="279532933"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Matlab%20interp3/slice/near/279532933" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Matlab.20interp3.2Fslice.html#279532933">(Apr 20 2022 at 12:00)</a>:</h4>
<p>Ahhhhhh how did I miss that. I will give it a shot later today but that looks like my answer haha. Thanks!</p>



<hr><p>Last updated: Mar 02 2026 at 05:32 UTC</p>
</html>