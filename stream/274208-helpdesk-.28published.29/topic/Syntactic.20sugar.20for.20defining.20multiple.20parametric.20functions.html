<html>
<head><meta charset="utf-8"><title>Syntactic sugar for defining multiple parametric functions · helpdesk (published) · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/index.html">helpdesk (published)</a></h2>
<h3>Topic: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html">Syntactic sugar for defining multiple parametric functions</a></h3>

<hr>

<base href="https://julialang.zulipchat.com">

<head><link href="https://juliacommunity.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="260655275"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/260655275" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#260655275">(Nov 08 2021 at 13:19)</a>:</h4>
<p>Hi,</p>
<p>The following is not possible:</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="k">let</span> <span class="kt">T</span> <span class="o">&lt;:</span> <span class="kt">Real</span>
       <span class="n">foo</span><span class="p">(</span><span class="n">t</span><span class="o">::</span><span class="kt">T</span><span class="p">)</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="n">t</span>
       <span class="n">bar</span><span class="p">(</span><span class="n">t</span><span class="o">::</span><span class="kt">T</span><span class="p">)</span> <span class="o">=</span> <span class="n">t</span> <span class="o">-</span> <span class="n">t</span>
       <span class="n">baz</span><span class="p">(</span><span class="n">t</span><span class="o">::</span><span class="kt">T</span><span class="p">)</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">t</span>
<span class="k">end</span>
</code></pre></div>
<p>Is there a way to avoid writing the same type parameter restrictions again and again for each function?</p>



<a name="260659656"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/260659656" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fredrik Ekre <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#260659656">(Nov 08 2021 at 13:58)</a>:</h4>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="k">let</span> <span class="n">X</span> <span class="o">=</span> <span class="n">T</span> <span class="k">where</span> <span class="kt">T</span> <span class="o">&lt;:</span> <span class="kt">Real</span>
           <span class="k">global</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">::</span><span class="kt">X</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span>
           <span class="k">global</span> <span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="o">::</span><span class="kt">X</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span>
       <span class="k">end</span>
<span class="n">g</span> <span class="p">(</span><span class="n">generic</span> <span class="k">function</span> <span class="n">with</span> <span class="mi">1</span> <span class="n">method</span><span class="p">)</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">1</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">g</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>
<span class="mf">2.0</span>
</code></pre></div>



<a name="260661850"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/260661850" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#260661850">(Nov 08 2021 at 14:16)</a>:</h4>
<p>Thanks! :-)</p>



<a name="260662150"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/260662150" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philipp Gabler <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#260662150">(Nov 08 2021 at 14:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="272644">Fredrik Ekre</span> <a href="#narrow/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions/near/260659656">said</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="k">let</span> <span class="n">X</span> <span class="o">=</span> <span class="n">T</span> <span class="k">where</span> <span class="kt">T</span> <span class="o">&lt;:</span> <span class="kt">Real</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Which in this case is equivalent to <code>let X = Real</code>.</p>



<a name="262292928"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262292928" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262292928">(Nov 22 2021 at 08:58)</a>:</h4>
<p>So... how to define blocks with sets of dependent parametric types - e.g. <code>(T1, T2) where {T1 &lt;: Number,T2 &lt;: AbstractVector{T1}}</code>?</p>
<div class="codehilite" data-code-language="Julia console"><pre><span></span><code><span class="gp">julia&gt;</span> <span class="k">let</span> <span class="n">T</span> <span class="o">=</span> <span class="n">T1</span> <span class="k">where</span> <span class="p">{</span><span class="kt">T1</span> <span class="o">&lt;:</span> <span class="kt">Number</span><span class="p">},</span> <span class="n">TVector</span> <span class="o">=</span> <span class="n">T2</span> <span class="k">where</span> <span class="p">{</span><span class="kt">T2</span> <span class="o">&lt;:</span> <span class="kt">AbstractVector</span><span class="p">{</span><span class="kt">T</span><span class="p">}}</span>
       <span class="k">global</span> <span class="k">function</span> <span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="o">::</span><span class="kt">T</span><span class="p">)</span>
           <span class="nd">@show</span> <span class="n">typeof</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
       <span class="k">end</span>
       <span class="k">global</span> <span class="k">function</span> <span class="n">foo</span><span class="p">(</span><span class="n">v</span><span class="o">::</span><span class="kt">TVector</span><span class="p">)</span>
           <span class="nd">@show</span> <span class="n">typeof</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
       <span class="k">end</span>
       <span class="k">end</span>
       <span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
       <span class="n">foo</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>
       <span class="n">foo</span><span class="p">(</span><span class="n">vec</span><span class="p">([</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]))</span>
<span class="go">typeof(x) = Int64</span>
<span class="go">typeof(x) = Float64</span>
<span class="gr">ERROR: MethodError: no method matching foo(::Vector{Int64})</span>
<span class="gr">Closest candidates are:</span>
<span class="gr">  foo(::Number) at REPL[36]:3</span>
<span class="gr">  foo(::AbstractVector{Number}) at REPL[36]:6</span>
</code></pre></div>
<p>Letting <code>TVector = AbstractVector</code> (without the parameterization on <code>T</code>), and defining <code>foo(v::TVector{T})</code> also does not define <code>foo</code> for <code>::Vector{Int64}</code>.</p>



<a name="262293332"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262293332" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fredrik Ekre <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262293332">(Nov 22 2021 at 09:01)</a>:</h4>
<p>Note that </p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="kt">Vector</span><span class="p">{</span><span class="kt">Int</span><span class="p">}</span> <span class="o">&lt;:</span> <span class="kt">Vector</span><span class="p">{</span><span class="kt">Real</span><span class="p">}</span>
<span class="nb">false</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="kt">Vector</span><span class="p">{</span><span class="kt">Int</span><span class="p">}</span> <span class="o">&lt;:</span> <span class="kt">Vector</span><span class="p">{</span><span class="o">&lt;:</span><span class="kt">Real</span><span class="p">}</span>
<span class="nb">true</span>
</code></pre></div>
<p>see <a href="https://docs.julialang.org/en/v1/manual/types/#man-parametric-composite-types">https://docs.julialang.org/en/v1/manual/types/#man-parametric-composite-types</a></p>



<a name="262293906"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262293906" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262293906">(Nov 22 2021 at 09:07)</a>:</h4>
<p>Let me answer myself...</p>
<p>This works at least (the generic function must have a <code>where T</code>):</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="k">let</span> <span class="n">T</span> <span class="o">=</span> <span class="kt">Number</span><span class="p">,</span> <span class="n">TVector</span> <span class="o">=</span> <span class="kt">AbstractVector</span>
    <span class="k">global</span> <span class="k">function</span> <span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="o">::</span><span class="kt">T</span><span class="p">)</span>
        <span class="nd">@show</span> <span class="n">typeof</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="k">global</span> <span class="k">function</span> <span class="n">foo</span><span class="p">(</span><span class="n">v</span><span class="o">::</span><span class="kt">TVector</span><span class="p">{</span><span class="kt">T</span><span class="p">})</span> <span class="k">where</span> <span class="kt">T</span>
        <span class="nd">@show</span> <span class="n">typeof</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">foo</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>
<span class="n">foo</span><span class="p">(</span><span class="n">vec</span><span class="p">([</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]))</span>
</code></pre></div>



<a name="262295466"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262295466" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262295466">(Nov 22 2021 at 09:25)</a>:</h4>
<p>... but all I achieved for <code>AbstractVector</code>/<code>TVector</code> was temporarily renaming it...</p>



<a name="262295653"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262295653" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262295653">(Nov 22 2021 at 09:27)</a>:</h4>
<p>parametric types in julia are invariant (except tuples)</p>



<a name="262295661"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262295661" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262295661">(Nov 22 2021 at 09:27)</a>:</h4>
<p>what would you like to achieve?</p>



<a name="262295751"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262295751" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262295751">(Nov 22 2021 at 09:28)</a>:</h4>
<p>if you want to define a function that takes vectors with elements of any number type, you can define <code>foo(v::AbstractVector{&lt;: Number})</code></p>



<a name="262296034"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262296034" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262296034">(Nov 22 2021 at 09:30)</a>:</h4>
<p>I would just like to avoid writing the same <code>where {T1 &lt;: AbstractT1, T2 &lt;: AbstractT2{T1}}</code> over and over for a block of methods.</p>



<a name="262296096"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262296096" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262296096">(Nov 22 2021 at 09:31)</a>:</h4>
<p>do you actually require <code>T2</code> in the method?</p>



<a name="262296117"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262296117" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262296117">(Nov 22 2021 at 09:31)</a>:</h4>
<p>if not, the way I've written it above is equvialent</p>



<a name="262296615"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262296615" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262296615">(Nov 22 2021 at 09:36)</a>:</h4>
<p>Yes, I think so - see for a very simple example the two functions for SerializationTypeSerializer: <a href="https://github.com/IHPSystems/TypeSerializers.jl/blob/main/src/TypeSerializers.jl">https://github.com/IHPSystems/TypeSerializers.jl/blob/main/src/TypeSerializers.jl</a></p>



<a name="262296707"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262296707" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262296707">(Nov 22 2021 at 09:37)</a>:</h4>
<p>those don't use <code>TSerializer</code> in the method itself though, only <code>T</code></p>



<a name="262296773"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262296773" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262296773">(Nov 22 2021 at 09:37)</a>:</h4>
<p>in which case <code>foo(s::SerializationTypeSerializer{T})::T where T</code> should be the same</p>



<a name="262296905"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262296905" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262296905">(Nov 22 2021 at 09:39)</a>:</h4>
<p>or more concrete for your example <code>::Type{&lt;:SerializationTypeSerializer{T}}</code>, I think</p>



<a name="262296942"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262296942" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262296942">(Nov 22 2021 at 09:39)</a>:</h4>
<p>This is what got me started (using those "type serializers"):<br>
<a href="https://github.com/IHPSystems/SerializingChannels.jl/blob/main/src/SerializingChannels.jl">https://github.com/IHPSystems/SerializingChannels.jl/blob/main/src/SerializingChannels.jl</a></p>



<a name="262296952"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262296952" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262296952">(Nov 22 2021 at 09:40)</a>:</h4>
<p>(though intuitively, to me that already reads like relying a lot of type hierarchies, complicating things)</p>



<a name="262297107"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262297107" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262297107">(Nov 22 2021 at 09:41)</a>:</h4>
<p>if you're already restricting the type at construction, why check for the same requirement on method definition as well?</p>



<a name="262297316"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262297316" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262297316">(Nov 22 2021 at 09:43)</a>:</h4>
<p>e.g., the struct and the first function should be equivalent to this</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="k">struct</span> <span class="kt">SerializingChannel</span><span class="p">{</span><span class="kt">T</span><span class="p">,</span> <span class="kt">TChannel</span> <span class="o">&lt;:</span> <span class="kt">AbstractChannel</span><span class="p">{</span><span class="kt">Vector</span><span class="p">{</span><span class="kt">UInt8</span><span class="p">}},</span> <span class="o">&lt;:</span> <span class="kt">AbstractTypeSerializer</span><span class="p">{</span><span class="kt">T</span><span class="p">}}</span>
    <span class="n">channel</span><span class="o">::</span><span class="kt">TChannel</span>
<span class="k">end</span>

<span class="k">function</span> <span class="n">Base</span><span class="o">.</span><span class="n">put!</span><span class="p">(</span><span class="n">channel</span><span class="o">::</span><span class="kt">SerializingChannel</span><span class="p">{</span><span class="kt">T</span><span class="p">,</span> <span class="kt">_</span><span class="p">,</span> <span class="kt">TSerializer</span><span class="p">},</span> <span class="n">value</span><span class="o">::</span><span class="kt">T</span><span class="p">)</span> <span class="k">where</span> <span class="p">{</span><span class="kt">T</span><span class="p">,</span> <span class="kt">TSerializer</span><span class="p">}</span>
    <span class="n">stream</span> <span class="o">=</span> <span class="n">serialize</span><span class="p">(</span><span class="n">TSerializer</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">take!</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
    <span class="n">put!</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">channel</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
<p>if I'm not mistaken</p>



<a name="262297359"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262297359" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262297359">(Nov 22 2021 at 09:43)</a>:</h4>
<p>you don't have to give things a name if you're not going to use them in the function</p>



<a name="262297695"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262297695" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262297695">(Nov 22 2021 at 09:47)</a>:</h4>
<p>Ah yes - I see. Thanks a lot!</p>



<a name="262297995"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262297995" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262297995">(Nov 22 2021 at 09:50)</a>:</h4>
<p>you're welcome!</p>



<a name="262298051"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262298051" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262298051">(Nov 22 2021 at 09:51)</a>:</h4>
<p>also, if you want to avoid allocations, you may want to pass in an <code>IO</code> object instead of constructing one in <code>serialize</code>, only for it to be destroyed immediately again :)</p>



<a name="262298104"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262298104" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262298104">(Nov 22 2021 at 09:51)</a>:</h4>
<p>though that may be harder to work into your current design, since you have a channel of <code>Vector{UInt8}</code></p>



<a name="262298120"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262298120" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262298120">(Nov 22 2021 at 09:51)</a>:</h4>
<p>(I'm also only speculating here, so may not be applicable to your situation)</p>



<a name="262299551"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262299551" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262299551">(Nov 22 2021 at 10:05)</a>:</h4>
<p>But I guess the programmer is still left to repetitive type constraints in the general case? I.e. where the type parameterization include abstract parametric types - like in the <code>Number, AbstractVector{&lt;:Number}</code> example above.</p>



<a name="262299781"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262299781" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262299781">(Nov 22 2021 at 10:07)</a>:</h4>
<p>you mean across methods?</p>



<a name="262299852"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262299852" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262299852">(Nov 22 2021 at 10:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306754">Sukera</span> <a href="#narrow/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions/near/262298051">said</a>:</p>
<blockquote>
<p>also, if you want to avoid allocations, you may want to pass in an <code>IO</code> object instead of constructing one in <code>serialize</code>, only for it to be destroyed immediately again :)</p>
</blockquote>
<p>Yeah - might be possible. It's highly targeted on being able to use <code>FlatBuffers</code> for serialization and <code>Zmq</code> as a transport.</p>
<p>It was also a bit of a struggle to make it play nice with the <code>Serialization</code> module...</p>



<a name="262299892"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262299892" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262299892">(Nov 22 2021 at 10:09)</a>:</h4>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">T</span> <span class="o">=</span> <span class="kt">Number</span>
<span class="kt">Number</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">TVec</span> <span class="o">=</span> <span class="kt">AbstractVector</span><span class="p">{</span><span class="o">&lt;:</span><span class="kt">T</span><span class="p">}</span>
<span class="kt">AbstractVector</span><span class="p">{</span><span class="o">&lt;:</span><span class="kt">Number</span><span class="p">}</span> <span class="p">(</span><span class="n">alias</span> <span class="k">for</span> <span class="kt">AbstractArray</span><span class="p">{</span><span class="o">&lt;:</span><span class="kt">Number</span><span class="p">,</span> <span class="mi">1</span><span class="p">})</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">foo</span><span class="p">(</span><span class="n">v</span><span class="o">::</span><span class="kt">TVec</span><span class="p">)</span> <span class="o">=</span> <span class="s">"nope"</span>
<span class="n">foo</span> <span class="p">(</span><span class="n">generic</span> <span class="k">function</span> <span class="n">with</span> <span class="mi">1</span> <span class="n">method</span><span class="p">)</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">foo</span><span class="p">(</span><span class="kt">Int</span><span class="p">[])</span>
<span class="s">"nope"</span>
</code></pre></div>



<a name="262299959"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262299959" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262299959">(Nov 22 2021 at 10:09)</a>:</h4>
<p>though that only works when you don't have interdependencies between two types in a signature</p>



<a name="262300025"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262300025" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262300025">(Nov 22 2021 at 10:10)</a>:</h4>
<p>so if you require one type parameter of one type and another of another type to be the same, you _will_ need that <code>where</code></p>



<a name="262300065"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262300065" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262300065">(Nov 22 2021 at 10:10)</a>:</h4>
<p>there's no way to express two different types having the same "slot" without specifying in which method that should apply</p>



<a name="262300098"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262300098" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262300098">(Nov 22 2021 at 10:11)</a>:</h4>
<p>(i.e. there's no real dependent typing in julia)</p>



<a name="262300186"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262300186" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262300186">(Nov 22 2021 at 10:12)</a>:</h4>
<p>also note that those <code>const T</code> are really only constant aliases - they're _not_ their own "versions" of that type</p>



<a name="262300273"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262300273" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262300273">(Nov 22 2021 at 10:13)</a>:</h4>
<blockquote>
<p>It's highly targeted on being able to use <code>FlatBuffers</code> for serialization</p>
</blockquote>
<p>well right now our <code>serialize</code> is always allocating an <code>IOBuffer</code> with its corresponding internal <code>Vector{UInt8}</code>, right?</p>



<a name="262300313"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262300313" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sukera <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262300313">(Nov 22 2021 at 10:13)</a>:</h4>
<p>so my guess would be that it would be more efficient to directly write to the FlatBuffer instead of having those intermediary stores</p>



<a name="262300740"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262300740" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262300740">(Nov 22 2021 at 10:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306754">Sukera</span> <a href="#narrow/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions/near/262299892">said</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">T</span> <span class="o">=</span> <span class="kt">Number</span>
<span class="kt">Number</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">TVec</span> <span class="o">=</span> <span class="kt">AbstractVector</span><span class="p">{</span><span class="o">&lt;:</span><span class="kt">T</span><span class="p">}</span>
<span class="kt">AbstractVector</span><span class="p">{</span><span class="o">&lt;:</span><span class="kt">Number</span><span class="p">}</span> <span class="p">(</span><span class="n">alias</span> <span class="k">for</span> <span class="kt">AbstractArray</span><span class="p">{</span><span class="o">&lt;:</span><span class="kt">Number</span><span class="p">,</span> <span class="mi">1</span><span class="p">})</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">foo</span><span class="p">(</span><span class="n">v</span><span class="o">::</span><span class="kt">TVec</span><span class="p">)</span> <span class="o">=</span> <span class="s">"nope"</span>
<span class="n">foo</span> <span class="p">(</span><span class="n">generic</span> <span class="k">function</span> <span class="n">with</span> <span class="mi">1</span> <span class="n">method</span><span class="p">)</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">foo</span><span class="p">(</span><span class="kt">Int</span><span class="p">[])</span>
<span class="s">"nope"</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Excellent. A bit puzzled though, that I did not manage to make those <code>T, TVec</code> definitions work in a <code>let</code> block...<br>
Should they just be nested <code>let</code> blocks? And how then to <code>global</code>'ize the method definitions?</p>



<a name="262300962"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262300962" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fredrik Ekre <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262300962">(Nov 22 2021 at 10:21)</a>:</h4>
<p>Why doesn't it work with <code>let</code>?</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="k">let</span> <span class="n">T</span> <span class="o">=</span> <span class="kt">Number</span><span class="p">,</span> <span class="n">TVec</span> <span class="o">=</span> <span class="kt">AbstractVector</span><span class="p">{</span><span class="o">&lt;:</span><span class="kt">T</span><span class="p">}</span>
           <span class="k">global</span> <span class="n">foo</span><span class="p">(</span><span class="o">::</span><span class="kt">TVec</span><span class="p">)</span> <span class="o">=</span> <span class="s">"nope"</span>
       <span class="k">end</span>
<span class="n">foo</span> <span class="p">(</span><span class="n">generic</span> <span class="k">function</span> <span class="n">with</span> <span class="mi">1</span> <span class="n">method</span><span class="p">)</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">foo</span><span class="p">(</span><span class="kt">Int</span><span class="p">[])</span>
<span class="s">"nope"</span>
</code></pre></div>



<a name="262301557"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Syntactic%20sugar%20for%20defining%20multiple%20parametric%20functions/near/262301557" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesper Stemann Andersen <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-.28published.29/topic/Syntactic.20sugar.20for.20defining.20multiple.20parametric.20functions.html#262301557">(Nov 22 2021 at 10:27)</a>:</h4>
<p>Ah - it was probably just the parametric type invariance that I messed up (defining <code>TVec = AbstractVector{T}</code> instead of <code>TVec = AbstractVector{&lt;:T}</code>).</p>
<p>Thanks again :-)</p>



<hr><p>Last updated: Nov 01 2025 at 04:39 UTC</p>
</html>