---
layout: archive
title: Zulip Chat Archive
permalink: /stream/274208-helpdesk-(published)/topic/Capture.20and.20print.20error.20as.20it.20appears.20in.20the.20repl.html
---

<h2>Stream: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/index.html">helpdesk (published)</a></h2>
<h3>Topic: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Capture.20and.20print.20error.20as.20it.20appears.20in.20the.20repl.html">Capture and print error as it appears in the repl</a></h3>

<hr>

<base href="https://julialang.zulipchat.com">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="236099067"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Capture%20and%20print%20error%20as%20it%20appears%20in%20the%20repl/near/236099067" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Capture.20and.20print.20error.20as.20it.20appears.20in.20the.20repl.html#236099067">(Apr 25 2021 at 22:36)</a>:</h4>
<p>In the repl, if I do <code>1 + "hi"</code> I get the error message</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">+</span> <span class="s">"hi"</span>
<span class="n">ERROR</span><span class="o">:</span> <span class="kt">MethodError</span><span class="o">:</span> <span class="n">no</span> <span class="n">method</span> <span class="n">matching</span> <span class="o">+</span><span class="p">(</span><span class="o">::</span><span class="kt">Int64</span><span class="p">,</span> <span class="o">::</span><span class="n">String</span><span class="p">)</span>
<span class="n">Closest</span> <span class="n">candidates</span> <span class="n">are</span><span class="o">:</span>
  <span class="o">+</span><span class="p">(</span><span class="o">::</span><span class="kt">Any</span><span class="p">,</span> <span class="o">::</span><span class="kt">Any</span><span class="p">,</span> <span class="o">::</span><span class="kt">Any</span><span class="p">,</span> <span class="o">::</span><span class="kt">Any</span><span class="o">...</span><span class="p">)</span> <span class="n">at</span> <span class="n">operators</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">560</span>
  <span class="o">+</span><span class="p">(</span><span class="o">::</span><span class="n">T</span><span class="p">,</span> <span class="o">::</span><span class="n">T</span><span class="p">)</span> <span class="n">where</span> <span class="n">T</span><span class="o">&lt;:</span><span class="kt">Union</span><span class="p">{</span><span class="kt">Int128</span><span class="p">,</span> <span class="kt">Int16</span><span class="p">,</span> <span class="kt">Int32</span><span class="p">,</span> <span class="kt">Int64</span><span class="p">,</span> <span class="kt">Int8</span><span class="p">,</span> <span class="kt">UInt128</span><span class="p">,</span> <span class="kt">UInt16</span><span class="p">,</span> <span class="kt">UInt32</span><span class="p">,</span> <span class="kt">UInt64</span><span class="p">,</span> <span class="kt">UInt8</span><span class="p">}</span> <span class="n">at</span> <span class="n">int</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">87</span>
  <span class="o">+</span><span class="p">(</span><span class="o">::</span><span class="kt">Union</span><span class="p">{</span><span class="kt">Int16</span><span class="p">,</span> <span class="kt">Int32</span><span class="p">,</span> <span class="kt">Int64</span><span class="p">,</span> <span class="kt">Int8</span><span class="p">},</span> <span class="o">::</span><span class="kt">BigInt</span><span class="p">)</span> <span class="n">at</span> <span class="n">gmp</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">534</span>
  <span class="o">...</span>
<span class="n">Stacktrace</span><span class="o">:</span>
 <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">top</span><span class="o">-</span><span class="n">level</span> <span class="n">scope</span>
   <span class="err">@</span> <span class="n">REPL</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span><span class="o">:</span><span class="mi">1</span>
</code></pre></div>
<p>If I were to wrap this in a <code>try</code> block, what would I have to <code>print</code> to <code>stdout</code> to make all the same info appear? I want to print the error message, the closest candidates info, and the stacktrace the way they appear in the REPL.</p>



<a name="236099106"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Capture%20and%20print%20error%20as%20it%20appears%20in%20the%20repl/near/236099106" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Capture.20and.20print.20error.20as.20it.20appears.20in.20the.20repl.html#236099106">(Apr 25 2021 at 22:37)</a>:</h4>
<p>e.g. I want to know the <code>f</code> such that</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="k">try</span>
    <span class="mi">1</span> <span class="o">+</span> <span class="s">"hi"</span>
<span class="k">catch</span> <span class="nb">e</span><span class="p">;</span>
    <span class="n">f</span><span class="p">(</span><span class="nb">e</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
<p>will print</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">ERROR</span><span class="o">:</span> <span class="kt">MethodError</span><span class="o">:</span> <span class="n">no</span> <span class="n">method</span> <span class="n">matching</span> <span class="o">+</span><span class="p">(</span><span class="o">::</span><span class="kt">Int64</span><span class="p">,</span> <span class="o">::</span><span class="n">String</span><span class="p">)</span>
<span class="n">Closest</span> <span class="n">candidates</span> <span class="n">are</span><span class="o">:</span>
  <span class="o">+</span><span class="p">(</span><span class="o">::</span><span class="kt">Any</span><span class="p">,</span> <span class="o">::</span><span class="kt">Any</span><span class="p">,</span> <span class="o">::</span><span class="kt">Any</span><span class="p">,</span> <span class="o">::</span><span class="kt">Any</span><span class="o">...</span><span class="p">)</span> <span class="n">at</span> <span class="n">operators</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">560</span>
  <span class="o">+</span><span class="p">(</span><span class="o">::</span><span class="n">T</span><span class="p">,</span> <span class="o">::</span><span class="n">T</span><span class="p">)</span> <span class="n">where</span> <span class="n">T</span><span class="o">&lt;:</span><span class="kt">Union</span><span class="p">{</span><span class="kt">Int128</span><span class="p">,</span> <span class="kt">Int16</span><span class="p">,</span> <span class="kt">Int32</span><span class="p">,</span> <span class="kt">Int64</span><span class="p">,</span> <span class="kt">Int8</span><span class="p">,</span> <span class="kt">UInt128</span><span class="p">,</span> <span class="kt">UInt16</span><span class="p">,</span> <span class="kt">UInt32</span><span class="p">,</span> <span class="kt">UInt64</span><span class="p">,</span> <span class="kt">UInt8</span><span class="p">}</span> <span class="n">at</span> <span class="n">int</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">87</span>
  <span class="o">+</span><span class="p">(</span><span class="o">::</span><span class="kt">Union</span><span class="p">{</span><span class="kt">Int16</span><span class="p">,</span> <span class="kt">Int32</span><span class="p">,</span> <span class="kt">Int64</span><span class="p">,</span> <span class="kt">Int8</span><span class="p">},</span> <span class="o">::</span><span class="kt">BigInt</span><span class="p">)</span> <span class="n">at</span> <span class="n">gmp</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">534</span>
  <span class="o">...</span>
<span class="n">Stacktrace</span><span class="o">:</span>
 <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">top</span><span class="o">-</span><span class="n">level</span> <span class="n">scope</span>
   <span class="err">@</span> <span class="n">REPL</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span><span class="o">:</span><span class="mi">1</span>
</code></pre></div>



<a name="236100456"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Capture%20and%20print%20error%20as%20it%20appears%20in%20the%20repl/near/236100456" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirill Simonov <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Capture.20and.20print.20error.20as.20it.20appears.20in.20the.20repl.html#236100456">(Apr 25 2021 at 23:01)</a>:</h4>
<p><code>Base.display_error(e, catch_backtrace())</code> seems to work for me.</p>



<a name="236101067"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Capture%20and%20print%20error%20as%20it%20appears%20in%20the%20repl/near/236101067" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Capture.20and.20print.20error.20as.20it.20appears.20in.20the.20repl.html#236101067">(Apr 25 2021 at 23:12)</a>:</h4>
<p>Awesome, thanks! I knew there was something like this floating around</p>



<a name="236101274"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Capture%20and%20print%20error%20as%20it%20appears%20in%20the%20repl/near/236101274" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takafumi Arakaki (tkf) <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Capture.20and.20print.20error.20as.20it.20appears.20in.20the.20repl.html#236101274">(Apr 25 2021 at 23:16)</a>:</h4>
<p>If you want a public API to do something similar:</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="k">try</span>
    <span class="mi">1</span> <span class="o">+</span> <span class="s">"hi"</span>
<span class="k">catch</span> <span class="nb">e</span><span class="p">;</span>
    <span class="nd">@error</span> <span class="s">"got an error"</span> <span class="n">exception</span> <span class="o">=</span> <span class="p">(</span><span class="nb">e</span><span class="p">,</span> <span class="n">catch_backtrace</span><span class="p">())</span>
<span class="k">end</span>
</code></pre></div>



<a name="236107928"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Capture%20and%20print%20error%20as%20it%20appears%20in%20the%20repl/near/236107928" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mosè Giordano <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Capture.20and.20print.20error.20as.20it.20appears.20in.20the.20repl.html#236107928">(Apr 26 2021 at 01:14)</a>:</h4>
<p><a href="https://stackoverflow.com/a/59690947/2442087">https://stackoverflow.com/a/59690947/2442087</a></p>



<a name="236108831"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Capture%20and%20print%20error%20as%20it%20appears%20in%20the%20repl/near/236108831" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Capture.20and.20print.20error.20as.20it.20appears.20in.20the.20repl.html#236108831">(Apr 26 2021 at 01:31)</a>:</h4>
<p>Great, thank you both</p>



<a name="236235664"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Capture%20and%20print%20error%20as%20it%20appears%20in%20the%20repl/near/236235664" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fredrik Ekre <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Capture.20and.20print.20error.20as.20it.20appears.20in.20the.20repl.html#236235664">(Apr 26 2021 at 20:12)</a>:</h4>
<p>See also <a href="#narrow/stream/274208-helpdesk-.28published.29/topic/filtering.20backtraces">https://julialang.zulipchat.com/#narrow/stream/274208-helpdesk-.28published.29/topic/filtering.20backtraces</a> (for filtering like the REPL).</p>



{% endraw %}

<hr><p>Last updated: Jun 25 2021 at 11:01 UTC</p>