---
layout: archive
title: Zulip Chat Archive
permalink: /stream/274208-helpdesk-(published)/topic/Build.20error.20(on.20Plots).20when.20running.20tests.html
---

<h2>Stream: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/index.html">helpdesk (published)</a></h2>
<h3>Topic: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Build.20error.20(on.20Plots).20when.20running.20tests.html">Build error (on Plots) when running tests</a></h3>

<hr>

<base href="https://julialang.zulipchat.com">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="228239388"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Build%20error%20%28on%20Plots%29%20when%20running%20tests/near/228239388" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sasha <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Build.20error.20(on.20Plots).20when.20running.20tests.html#228239388">(Mar 01 2021 at 14:31)</a>:</h4>
<p>Hi, I'm new to the language and I'm learning/experimenting on how to use tests in Julia</p>
<p>The issue that I encounter when I run the tests under my environment like this</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="p">(</span><span class="n">testing</span><span class="o">-</span><span class="n">pluto</span><span class="p">)</span> <span class="n">pkg</span><span class="o">&gt;</span> <span class="n">test</span>
</code></pre></div>
<p>I get an error of failing precompilation of <code>Plots</code> that cascades from <code>libvorbis_jll -&gt; FFMPEG_jll  -&gt; FFMPEG  -&gt; Plots</code></p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">ERROR: LoadError: LoadError: ArgumentError: Package libvorbis_jll [e895b1f3-4dc4-43e3-88f4-b83e006265b7] is required but does not seem to be installed:</span>
<span class="go"> - Run `Pkg.instantiate()` to install all recorded dependencies.</span>
<span class="go">.</span>
<span class="go">.</span>
<span class="go">.</span>
<span class="go">  LoadError: Failed to precompile Plots [91a5bcdd-55d7-5caf-9e0b-520d859cae80] to /home/runner/.julia/compiled/v1.5/Plots/ld3vC_31teM.ji.</span>
</code></pre></div>
<p>What I don't understand is that I'm able to run the tests script if I just execute them as a regular script like with</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>julia --color<span class="o">=</span>yes --check-bounds<span class="o">=</span>yes  --depwarn<span class="o">=</span>yes --project -e <span class="s1">'cd("test");include("runtests.jl")'</span>
</code></pre></div>
<p>So is pretty clear that some other things happen when you execute the tests using <code>Pkg.test()</code> </p>
<p>Can you explain what can be happening or point me where to learn about it? <br>
So I can try to fix it or file  an issue where it corresponds</p>
<p>Thanks!</p>
<p>For repro you can look at the code in<br>
<a href="https://github.com/akielbowicz/testing_pluto/tree/add_tests">here</a>, look at the <em>add_tests</em> branch.<br>
And I set up two <a href="https://github.com/akielbowicz/testing_pluto/actions">GH actions</a> so its possible to see the the full stack trace of both ways to execute the tests.</p>



{% endraw %}

<hr><p>Last updated: Jun 25 2021 at 11:01 UTC</p>