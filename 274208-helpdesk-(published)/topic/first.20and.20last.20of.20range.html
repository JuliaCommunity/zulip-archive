---
layout: archive
title: Zulip Chat Archive
permalink: /stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html
---

<h2>Stream: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/index.html">helpdesk (published)</a></h2>
<h3>Topic: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html">first and last of range</a></h3>

<hr>

<base href="https://julialang.zulipchat.com">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="227969264"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227969264" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Júlio Hoffimann <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227969264">(Feb 26 2021 at 18:20)</a>:</h4>
<p>Given a range <code>r = 0.5:10.0</code> how do we recover the first and last as typed?</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">first</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="c"># ok this is 0.5</span>
<span class="n">last</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="c"># not ok this is 9.5</span>
</code></pre></div>



<a name="227969518"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227969518" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Expanding Man <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227969518">(Feb 26 2021 at 18:21)</a>:</h4>
<p>You can't, it computes this when it first constructs the type.  What you happened to type in is lost.</p>



<a name="227970672"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227970672" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227970672">(Feb 26 2021 at 18:30)</a>:</h4>
<p>It's like asking "suppose I type <code>x = round(1.5)</code>, how do I get back <code>1.5</code>?"</p>



<a name="227971805"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227971805" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Júlio Hoffimann <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227971805">(Feb 26 2021 at 18:37)</a>:</h4>
<p>I get it, just wanted to double check. I am trying to write a function <code>slice(obj, ranges...)</code> that is implemented in terms of a bounding box <code>view(obj, Box(first.(ranges), last.(ranges))</code> and because the last is not the same as the one typed by the user the behavior is unexpected <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="227971943"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227971943" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227971943">(Feb 26 2021 at 18:38)</a>:</h4>
<p>yeah, it's certainly a reasonable question!</p>



<a name="227972036"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227972036" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Júlio Hoffimann <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227972036">(Feb 26 2021 at 18:39)</a>:</h4>
<p>There is no workaround for this?</p>



<a name="227972073"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227972073" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Júlio Hoffimann <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227972073">(Feb 26 2021 at 18:39)</a>:</h4>
<p>How could I enforce the same range given a range object?</p>



<a name="227972219"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227972219" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Júlio Hoffimann <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227972219">(Feb 26 2021 at 18:40)</a>:</h4>
<p>I think I will just add a warning to the doc string in this case. It is easier. Users can remediate the situation with a buffer.</p>



<a name="227972364"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227972364" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Expanding Man <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227972364">(Feb 26 2021 at 18:41)</a>:</h4>
<p>Not with this type, you'd need to create a new type for it.  I'm not really following what you're trying to do, but I suspect if I were you I would not want to echo what the user typed in, but instead the actual underlying state of the thing.  If you show them what they typed in, you will not actually be showing them the bound of the range.</p>



<a name="227972436"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227972436" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227972436">(Feb 26 2021 at 18:42)</a>:</h4>
<p>you could do:</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="k">function</span> <span class="p">(</span><span class="o">:</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
           <span class="n">col</span> <span class="o">=</span> <span class="n">Base</span><span class="o">.:</span><span class="p">(</span><span class="o">:</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
           <span class="k">if</span> <span class="n">col</span><span class="p">[</span><span class="k">begin</span><span class="p">]</span> <span class="o">!=</span> <span class="n">x</span> <span class="o">||</span> <span class="n">col</span><span class="p">[</span><span class="k">end</span><span class="p">]</span> <span class="o">!=</span> <span class="n">y</span>
               <span class="n">throw</span><span class="p">(</span><span class="s">"don't do that"</span><span class="p">)</span>
           <span class="k">end</span>
           <span class="n">col</span>
       <span class="k">end</span>
<span class="o">:</span> <span class="p">(</span><span class="n">generic</span> <span class="k">function</span> <span class="n">with</span> <span class="mi">1</span> <span class="n">method</span><span class="p">)</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="mf">0.5</span><span class="o">:</span><span class="mi">10</span>
<span class="n">ERROR</span><span class="o">:</span> <span class="s">"don't do that"</span>
<span class="n">Stacktrace</span><span class="o">:</span>
 <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span><span class="p">(</span><span class="n">x</span><span class="o">::</span><span class="kt">Float64</span><span class="p">,</span> <span class="n">y</span><span class="o">::</span><span class="kt">Int64</span><span class="p">)</span>
   <span class="err">@</span> <span class="n">Main</span> <span class="o">./</span><span class="n">REPL</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">:</span><span class="mi">4</span>
 <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="n">top</span><span class="o">-</span><span class="n">level</span> <span class="n">scope</span>
   <span class="err">@</span> <span class="n">REPL</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">:</span><span class="mi">1</span>
</code></pre></div>



<a name="227972447"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227972447" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227972447">(Feb 26 2021 at 18:42)</a>:</h4>
<p>Or something similar</p>



<a name="227972556"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227972556" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227972556">(Feb 26 2021 at 18:43)</a>:</h4>
<p>A note about rounding in the docstring would be a good idea.</p>



<a name="227972574"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/227972574" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Expanding Man <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#227972574">(Feb 26 2021 at 18:43)</a>:</h4>
<p>oh yeah, that's a much better option; I was confused about whether you just wanted a different display behavior or whether you want to throw an error for rangers with a bound the doesn't correspond to the end.  Throwing an error seems far more reasonable</p>



<a name="228015682"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/228015682" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#228015682">(Feb 27 2021 at 00:03)</a>:</h4>
<p>If you want to guarantee the endpoints of the range, I suggest using <code>length</code> rather than <code>step</code>.</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="n">range</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">10</span><span class="p">;</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">11</span><span class="p">)</span>
<span class="mf">0.5</span><span class="o">:</span><span class="mf">0.95</span><span class="o">:</span><span class="mf">10.0</span>
</code></pre></div>
<p>In Julia 1.7, you will be able to specify <code>length</code> as the third positional argument.</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="n">range</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="mf">0.5</span><span class="o">:</span><span class="mf">0.95</span><span class="o">:</span><span class="mf">10.0</span>
</code></pre></div>



<a name="228015997"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/228015997" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#228015997">(Feb 27 2021 at 00:07)</a>:</h4>
<p>If what you want is to just memoize the two numbers, may I suggest <code>Pair</code>?</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">=&gt;</span> <span class="mi">10</span>
<span class="mf">0.5</span> <span class="o">=&gt;</span> <span class="mi">10</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">first</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="mf">0.5</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">last</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="mi">10</span>
</code></pre></div>
<p>I created something of a rogue package to experiment with different range concepts if you are interested. One of those forms accepts a <code>Pair</code>:<br>
<a href="https://github.com/mkitti/Ranges.jl">https://github.com/mkitti/Ranges.jl</a></p>



<a name="228019035"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/first%20and%20last%20of%20range/near/228019035" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Júlio Hoffimann <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/first.20and.20last.20of.20range.html#228019035">(Feb 27 2021 at 00:47)</a>:</h4>
<p>In this use case users will not use ranges like this, they will probably write <code>slice(obj, 0.5:10.0, 0.5:10.0)</code>. I just added a warning to the docstring.</p>



{% endraw %}

<hr><p>Last updated: Mar 11 2021 at 13:06 UTC</p>