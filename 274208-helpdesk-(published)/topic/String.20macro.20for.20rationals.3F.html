---
layout: archive
title: Zulip Chat Archive
permalink: /stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html
---

<h2>Stream: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/index.html">helpdesk (published)</a></h2>
<h3>Topic: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html">String macro for rationals?</a></h3>

<hr>

<base href="https://julialang.zulipchat.com">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="234336495"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234336495" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234336495">(Apr 13 2021 at 14:35)</a>:</h4>
<p>Is there a string macro to create a Rational?</p>



<a name="234353635"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234353635" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fredrik Ekre <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234353635">(Apr 13 2021 at 16:00)</a>:</h4>
<p>Why do you need a string macro?</p>



<a name="234353832"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234353832" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Gro√üe <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234353832">(Apr 13 2021 at 16:01)</a>:</h4>
<p>I don't think so. Does <code>2//3</code> not work in your case? Or do you propose something that makes a rational from a common literal like 2.568?</p>



<a name="234354946"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234354946" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234354946">(Apr 13 2021 at 16:08)</a>:</h4>
<p>I was thinking of something like <code>rational"0.1"</code> where I would get <code>1//10</code></p>



<a name="234355118"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234355118" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234355118">(Apr 13 2021 at 16:08)</a>:</h4>
<p>Basically, it's like <code>rationalize(0.1)</code></p>



<a name="234355529"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234355529" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fredrik Ekre <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234355529">(Apr 13 2021 at 16:11)</a>:</h4>
<p>So what is wrong with <code>rationalize(0.1)</code>?</p>



<a name="234357025"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234357025" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234357025">(Apr 13 2021 at 16:20)</a>:</h4>
<p>It has to jump through a lot of hoops to go from floating point to Rational. I think there is a direct interpretation of a finite decimal may be possible. For example, I would like these two statements to be equal:</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="n">rationalize</span><span class="p">(</span><span class="mf">0.29999999999999998</span><span class="p">)</span>
<span class="mi">3</span><span class="o">//</span><span class="mi">10</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="mi">29999999999999998</span> <span class="o">//</span> <span class="mi">100000000000000000</span>
<span class="mi">14999999999999999</span><span class="o">//</span><span class="mi">50000000000000000</span>
</code></pre></div>



<a name="234357870"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234357870" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fredrik Ekre <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234357870">(Apr 13 2021 at 16:25)</a>:</h4>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="k">function</span> <span class="n">rational_from_string</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">split</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="sc">'.'</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="kt">Int</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="kt">Int</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">//</span> <span class="mi">10</span><span class="o">^</span><span class="n">length</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>



<a name="234358101"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234358101" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234358101">(Apr 13 2021 at 16:26)</a>:</h4>
<p>Exactly, so</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="k">macro</span> <span class="n">rational_str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
           <span class="n">rational_from_string</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
       <span class="k">end</span>
<span class="nd">@rational_str</span> <span class="p">(</span><span class="k">macro</span> <span class="n">with</span> <span class="mi">1</span> <span class="n">method</span><span class="p">)</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">rational</span><span class="s">"0.29999999999999998"</span>
<span class="mi">14999999999999999</span><span class="o">//</span><span class="mi">50000000000000000</span>
</code></pre></div>



<a name="234358207"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234358207" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234358207">(Apr 13 2021 at 16:27)</a>:</h4>
<p>Should that be in Base?</p>



<a name="234358504"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234358504" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fredrik Ekre <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234358504">(Apr 13 2021 at 16:28)</a>:</h4>
<p>No.</p>



<a name="234363255"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234363255" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234363255">(Apr 13 2021 at 16:58)</a>:</h4>
<p>That's basically my question. I guess the answer is that it is not in Base because it is trivial to implement?</p>



<a name="234369262"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234369262" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234369262">(Apr 13 2021 at 17:34)</a>:</h4>
<p>It's more that it's not in base because base doesn't need it</p>



<a name="234369506"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234369506" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234369506">(Apr 13 2021 at 17:36)</a>:</h4>
<p>For the most part, I think Base tries to only include things it needs to building itself up and tries to leave stuff like this for packages or whatever. This isn't exactly an ideology that's uniformly shared among the whole developer community though.</p>



<a name="234388481"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234388481" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234388481">(Apr 13 2021 at 19:45)</a>:</h4>
<p>I suppose the analogy I see here is to the <code>@big_str</code> macro as in</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="n">big</span><span class="s">"0.29999999999999998"</span>
<span class="mf">0.299999999999999979999999999999999999999999999999999999999999999999999999999999</span>
</code></pre></div>



<a name="234388871"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234388871" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kittisopikul <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234388871">(Apr 13 2021 at 19:46)</a>:</h4>
<p>I'll look into a small <code>RationalDecimals.jl</code> package. For the moment, I just put this into a gist if you don't mind, <span class="user-mention" data-user-id="272644">@Fredrik Ekre</span> :<br>
<a href="https://gist.github.com/mkitti/37bbe8e4f32d72111c25feeb840fbc2b">https://gist.github.com/mkitti/37bbe8e4f32d72111c25feeb840fbc2b</a></p>



<a name="234392472"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234392472" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simeon Schaub <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234392472">(Apr 13 2021 at 20:08)</a>:</h4>
<p><code>@big_str</code> is actually used in the parser for big int literals</p>



<a name="234394613"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234394613" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234394613">(Apr 13 2021 at 20:25)</a>:</h4>
<p>The devs have wanted to remove the <code>Big_____</code> numbers from Base for a while now. The barrier to doing that has been exactly the parser integrations that Simeon mentions</p>



<a name="234394682"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/String%20macro%20for%20rationals%3F/near/234394682" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/String.20macro.20for.20rationals.3F.html#234394682">(Apr 13 2021 at 20:25)</a>:</h4>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="mi">100000000000000</span> <span class="o">|&gt;</span> <span class="n">typeof</span>
<span class="kt">Int64</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="mi">1000000000000000000000000000</span> <span class="o">|&gt;</span> <span class="n">typeof</span>
<span class="kt">Int128</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="mi">1000000000000000000000000000000000000000000000000000</span> <span class="o">|&gt;</span> <span class="n">typeof</span>
<span class="kt">BigInt</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jun 25 2021 at 11:01 UTC</p>