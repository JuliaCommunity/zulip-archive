---
layout: archive
title: Zulip Chat Archive
permalink: /stream/274208-helpdesk-(published)/topic/Bitwise.20and.html
---

<h2>Stream: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/index.html">helpdesk (published)</a></h2>
<h3>Topic: <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html">Bitwise and</a></h3>

<hr>

<base href="https://julialang.zulipchat.com">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="243082325"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243082325" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243082325">(Jun 17 2021 at 20:47)</a>:</h4>
<p>Say I have two arrays of Floats, is there a way to compare them using the bitwise and operator <code>.&amp;</code> or some other operator?</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">ŷ</span> <span class="o">.&amp;</span> <span class="n">y</span>
</code></pre></div>
<p>The above works for Int and Bool but not Floats</p>



<a name="243082742"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243082742" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243082742">(Jun 17 2021 at 20:50)</a>:</h4>
<p>Or maybe a better question, is there a better way to convert Floats to integers?</p>
<p>Here is the full code and I am getting an inexact error when I try to run this</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="k">function</span> <span class="n">dice_metric</span><span class="p">(</span><span class="n">ŷ</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">ŷ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="kt">Int64</span><span class="o">.</span><span class="p">(</span><span class="n">ŷ</span><span class="p">),</span> <span class="kt">Int64</span><span class="o">.</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="n">dice</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">sum</span><span class="p">((</span><span class="n">ŷ</span> <span class="o">.&amp;</span> <span class="n">y</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">sum</span><span class="p">(</span><span class="n">ŷ</span><span class="p">)</span> <span class="o">+</span> <span class="n">sum</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">dice</span>
<span class="k">end</span>
</code></pre></div>



<a name="243082855"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243082855" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243082855">(Jun 17 2021 at 20:51)</a>:</h4>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="kt">InexactError</span><span class="o">:</span> <span class="kt">Int64</span><span class="p">(</span><span class="o">-</span><span class="mf">5.5319665e-6</span><span class="p">)</span>

<span class="n">Stacktrace</span><span class="o">:</span>
  <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="kt">Int64</span>
    <span class="err">@</span> <span class="o">./</span><span class="n">float</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">723</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
  <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="n">_broadcast_getindex_evalf</span>
    <span class="err">@</span> <span class="o">./</span><span class="n">broadcast</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">648</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
  <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">_broadcast_getindex</span>
    <span class="err">@</span> <span class="o">./</span><span class="n">broadcast</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">621</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
  <span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="n">getindex</span>
    <span class="err">@</span> <span class="o">./</span><span class="n">broadcast</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">575</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
  <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="k">macro</span> <span class="n">expansion</span>
    <span class="err">@</span> <span class="o">./</span><span class="n">broadcast</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">984</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
  <span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="k">macro</span> <span class="n">expansion</span>
    <span class="err">@</span> <span class="o">./</span><span class="n">simdloop</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">77</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
  <span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="n">copyto!</span>
    <span class="err">@</span> <span class="o">./</span><span class="n">broadcast</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">983</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
  <span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="n">copyto!</span>
    <span class="err">@</span> <span class="o">./</span><span class="n">broadcast</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">936</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
  <span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="n">copy</span>
    <span class="err">@</span> <span class="o">./</span><span class="n">broadcast</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">908</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="n">materialize</span>
    <span class="err">@</span> <span class="o">./</span><span class="n">broadcast</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">883</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="n">dice_metric</span><span class="p">(</span><span class="n">ŷ</span><span class="o">::</span><span class="kt">Array</span><span class="p">{</span><span class="kt">Float32</span><span class="p">,</span> <span class="mi">4</span><span class="p">},</span> <span class="n">y</span><span class="o">::</span><span class="kt">Array</span><span class="p">{</span><span class="kt">Float32</span><span class="p">,</span> <span class="mi">4</span><span class="p">})</span>
    <span class="err">@</span> <span class="n">Main</span> <span class="o">./</span><span class="n">In</span><span class="p">[</span><span class="mi">28</span><span class="p">]</span><span class="o">:</span><span class="mi">2</span>
 <span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="n">top</span><span class="o">-</span><span class="n">level</span> <span class="n">scope</span>
    <span class="err">@</span> <span class="n">In</span><span class="p">[</span><span class="mi">37</span><span class="p">]</span><span class="o">:</span><span class="mi">39</span>
 <span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="n">eval</span>
    <span class="err">@</span> <span class="o">./</span><span class="n">boot</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">360</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="n">include_string</span><span class="p">(</span><span class="n">mapexpr</span><span class="o">::</span><span class="n">typeof</span><span class="p">(</span><span class="n">REPL</span><span class="o">.</span><span class="n">softscope</span><span class="p">),</span> <span class="n">mod</span><span class="o">::</span><span class="kt">Module</span><span class="p">,</span> <span class="n">code</span><span class="o">::</span><span class="kt">String</span><span class="p">,</span> <span class="n">filename</span><span class="o">::</span><span class="kt">String</span><span class="p">)</span>
    <span class="err">@</span> <span class="n">Base</span> <span class="o">./</span><span class="n">loading</span><span class="o">.</span><span class="n">jl</span><span class="o">:</span><span class="mi">1094</span>
</code></pre></div>



<a name="243082896"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243082896" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Bauman <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243082896">(Jun 17 2021 at 20:51)</a>:</h4>
<p>What's a <code>true</code> floating point value to you?</p>



<a name="243082907"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243082907" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Bauman <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243082907">(Jun 17 2021 at 20:51)</a>:</h4>
<p>all nonzeros?</p>



<a name="243083008"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243083008" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243083008">(Jun 17 2021 at 20:52)</a>:</h4>
<p>Yes I am working with binary arrays currently so that should be correct</p>



<a name="243083140"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243083140" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Bauman <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243083140">(Jun 17 2021 at 20:53)</a>:</h4>
<p>what's a binary array?</p>



<a name="243083176"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243083176" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Bauman <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243083176">(Jun 17 2021 at 20:53)</a>:</h4>
<p>In any case, I think I'd do <code>@. !iszero(ŷ) &amp; !iszero(y)</code></p>



<a name="243083487"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243083487" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mason Protter <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243083487">(Jun 17 2021 at 20:55)</a>:</h4>
<p>To me, this is what I think of when I think of bitwise and between floats:</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">5</span><span class="o">-</span><span class="n">element</span> <span class="kt">Vector</span><span class="p">{</span><span class="kt">Float64</span><span class="p">}</span><span class="o">:</span>
 <span class="mf">0.4136385097187676</span>
 <span class="mf">0.8561170860323639</span>
 <span class="mf">0.5673269657861939</span>
 <span class="mf">0.3364253326881379</span>
 <span class="mf">0.2945387286498147</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">5</span><span class="o">-</span><span class="n">element</span> <span class="kt">Vector</span><span class="p">{</span><span class="kt">Float64</span><span class="p">}</span><span class="o">:</span>
 <span class="mf">0.6559688998496613</span>
 <span class="mf">0.033461184123736</span>
 <span class="mf">0.6446603481441768</span>
 <span class="mf">0.9123783704466826</span>
 <span class="mf">0.7033529950179171</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">reinterpret</span><span class="p">(</span><span class="kt">UInt64</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="o">.&amp;</span> <span class="n">reinterpret</span><span class="p">(</span><span class="kt">UInt64</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="mi">5</span><span class="o">-</span><span class="n">element</span> <span class="kt">Vector</span><span class="p">{</span><span class="kt">UInt64</span><span class="p">}</span><span class="o">:</span>
 <span class="mh">0x3fc0790025808400</span>
 <span class="mh">0x3fa1214300c04100</span>
 <span class="mh">0x3fe0210aa1001082</span>
 <span class="mh">0x3fc502341e540000</span>
 <span class="mh">0x3fc2819823a42004</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">reinterpret</span><span class="p">(</span><span class="kt">Float64</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
<span class="mi">5</span><span class="o">-</span><span class="n">element</span> <span class="n">reinterpret</span><span class="p">(</span><span class="kt">Float64</span><span class="p">,</span> <span class="o">::</span><span class="kt">Vector</span><span class="p">{</span><span class="kt">UInt64</span><span class="p">})</span><span class="o">:</span>
 <span class="mf">0.1286926444163612</span>
 <span class="mf">0.03345689186255818</span>
 <span class="mf">0.5040333885704202</span>
 <span class="mf">0.16412974816194037</span>
 <span class="mf">0.14457990398682352</span>
</code></pre></div>



<a name="243083576"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243083576" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Bauman <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243083576">(Jun 17 2021 at 20:56)</a>:</h4>
<p>Yeah, I think you're after logical <code>&amp;&amp;</code>, not bitwise <code>&amp;</code></p>



<a name="243084600"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243084600" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243084600">(Jun 17 2021 at 21:04)</a>:</h4>
<p>Okay I will do some investigating because I realize now I don't really understand bitwise and</p>



<a name="243402440"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243402440" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> chriselrod <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243402440">(Jun 21 2021 at 15:47)</a>:</h4>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span> <span class="n">bitstring</span><span class="p">(</span><span class="mh">0x55</span><span class="p">)</span>
<span class="s">"01010101"</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">bitstring</span><span class="p">(</span><span class="mh">0x0f</span><span class="p">)</span>
<span class="s">"00001111"</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">bitstring</span><span class="p">(</span><span class="mh">0x55</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">)</span>
<span class="s">"00000101"</span>
</code></pre></div>
<p>Bitwise <code>&amp;</code> does <code>&amp;</code> between the individual bits of the number.</p>



<a name="243465460"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243465460" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243465460">(Jun 22 2021 at 02:16)</a>:</h4>
<p>Okay, it looks like bitwise <code>&amp;</code> is actually what I am looking for then. I just need to figure out the best way to turn an array of numbers into a binary array of zeros and ones after they go through a training loop</p>



<a name="243465466"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243465466" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243465466">(Jun 22 2021 at 02:16)</a>:</h4>
<p>I'm simply trying to use this <code>dice_metric</code></p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="k">function</span> <span class="n">dice_metric</span><span class="p">(</span><span class="n">ŷ</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">dice</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">sum</span><span class="p">(</span><span class="n">ŷ</span> <span class="o">.&amp;</span> <span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">sum</span><span class="p">(</span><span class="n">ŷ</span><span class="p">)</span> <span class="o">+</span> <span class="n">sum</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">dice</span>
<span class="k">end</span>
</code></pre></div>



<a name="243466185"></a>
<h4><a href="https://julialang.zulipchat.com#narrow/stream/274208-helpdesk%20%28published%29/topic/Bitwise%20and/near/243466185" class="zl"><img src="https://juliacommunity.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dale Black <a href="https://juliacommunity.github.io/zulip-archive/stream/274208-helpdesk-(published)/topic/Bitwise.20and.html#243466185">(Jun 22 2021 at 02:31)</a>:</h4>
<p>I will go with this for now since it seems to work fine</p>
<div class="codehilite" data-code-language="Julia"><pre><span></span><code><span class="k">function</span> <span class="n">as_discrete</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">logit_threshold</span><span class="p">)</span>
    <span class="n">array</span> <span class="o">=</span> <span class="n">array</span> <span class="o">.&gt;=</span> <span class="n">logit_threshold</span>
    <span class="k">return</span> <span class="n">array</span>
<span class="k">end</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jun 25 2021 at 11:01 UTC</p>