[
    {
        "content": "<p>I'm trying to build an artifact, that the compilation works on all platforms on my machine. However, in the pull request to Yggdrasil, the binaries for windows are failing, because the binary created is not found:</p>\n<p><a href=\"https://buildkite.com/julialang/yggdrasil/builds/4037#01894634-7a9c-454c-bfaa-b681110e586f/644-750\">https://buildkite.com/julialang/yggdrasil/builds/4037#01894634-7a9c-454c-bfaa-b681110e586f/644-750</a></p>\n<p>Anyone has a hint on how to fix this? I don't know how to debug that. The path seems correct and it works when I run the build locally.</p>",
        "id": 374360700,
        "sender_full_name": "Leandro Martínez",
        "timestamp": 1689101466
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"455681\">Leandro Martínez</span> <a href=\"#narrow/stream/274208-helpdesk-.28published.29/topic/BinaryBuilder.20not.20finding.20file.20on.20Windows/near/374360700\">said</a>:</p>\n<blockquote>\n<p>The path seems correct</p>\n</blockquote>\n<p>That's clearly not the case since install can't find the file</p>\n<p><span class=\"user-mention silent\" data-user-id=\"455681\">Leandro Martínez</span> <a href=\"#narrow/stream/274208-helpdesk-.28published.29/topic/BinaryBuilder.20not.20finding.20file.20on.20Windows/near/374360700\">said</a>:</p>\n<blockquote>\n<p>and it works when I run the build locally.</p>\n</blockquote>\n<p>What do you mean exactly by this?</p>\n<p><span class=\"user-mention silent\" data-user-id=\"455681\">Leandro Martínez</span> <a href=\"#narrow/stream/274208-helpdesk-.28published.29/topic/BinaryBuilder.20not.20finding.20file.20on.20Windows/near/374360700\">said</a>:</p>\n<blockquote>\n<p>I don't know how to debug that.</p>\n</blockquote>\n<p><a href=\"https://docs.binarybuilder.org/stable/#Manually-create-or-edit-build_tarballs.jl\">https://docs.binarybuilder.org/stable/#Manually-create-or-edit-build_tarballs.jl</a></p>\n<blockquote>\n<p>The <code>--debug</code> option will drop you into the BinaryBuilder interactive shell if an error occurs.</p>\n</blockquote>",
        "id": 374384794,
        "sender_full_name": "Mosè Giordano",
        "timestamp": 1689108958
    },
    {
        "content": "<p>My slightly educated guess is that you're missing the exe extension, but I don't think gcc 4.8 forces it, I believe that was introduced in gcc 8</p>",
        "id": 374385107,
        "sender_full_name": "Mosè Giordano",
        "timestamp": 1689109059
    },
    {
        "content": "<p>What do you mean exactly by this?</p>\n<p>I mean that I can run the <code>BinaryBuilder.run_wizard()</code> locally, build the Windows binaries and I don´t  get any error. The file <code>mdlovofit</code> is there. I tried now a different approach to managing the extension (as suggested by another user). Let us see. </p>\n<p>The problem for debuging is that I cannot reproduce the error here in my machine.</p>",
        "id": 374443873,
        "sender_full_name": "Leandro Martínez",
        "timestamp": 1689115004
    },
    {
        "content": "<p>That's not possible</p>",
        "id": 374451033,
        "sender_full_name": "Mosè Giordano",
        "timestamp": 1689118148
    },
    {
        "content": "<p>Ah, you're expanding libgfortran version and it's failing only with libgfortran v5, which <em>is</em> gcc 8, so my educated guess is indeed correct</p>",
        "id": 374451412,
        "sender_full_name": "Mosè Giordano",
        "timestamp": 1689118343
    },
    {
        "content": "<p>I don't know how you were trying to reproduce it because you'd have reproduced the error by running the script with <code>--debug</code></p>",
        "id": 374451575,
        "sender_full_name": "Mosè Giordano",
        "timestamp": 1689118443
    },
    {
        "content": "<p>The Makefile could make it with some improvements</p>",
        "id": 374451658,
        "sender_full_name": "Mosè Giordano",
        "timestamp": 1689118478
    },
    {
        "content": "<p><a href=\"https://github.com/JuliaPackaging/Yggdrasil/pull/7033#issuecomment-1631643386\">https://github.com/JuliaPackaging/Yggdrasil/pull/7033#issuecomment-1631643386</a></p>",
        "id": 374452017,
        "sender_full_name": "Mosè Giordano",
        "timestamp": 1689118671
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"269186\">Mosè Giordano</span> <a href=\"#narrow/stream/274208-helpdesk-.28published.29/topic/BinaryBuilder.20not.20finding.20file.20on.20Windows/near/374384794\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"455681\">Leandro Martínez</span> <a href=\"#narrow/stream/274208-helpdesk-.28published.29/topic/BinaryBuilder.20not.20finding.20file.20on.20Windows/near/374360700\">said</a>:</p>\n<blockquote>\n<p>I don't know how to debug that.</p>\n</blockquote>\n<p><a href=\"https://docs.binarybuilder.org/stable/#Manually-create-or-edit-build_tarballs.jl\">https://docs.binarybuilder.org/stable/#Manually-create-or-edit-build_tarballs.jl</a></p>\n<blockquote>\n<p>The <code>--debug</code> option will drop you into the BinaryBuilder interactive shell if an error occurs.</p>\n</blockquote>\n</blockquote>\n<p>The same section of the manual explains that you can pass as argument to the script a comma-separated list of platform triplets, so the easiest way for you to reproduce the error would have been</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">julia</span><span class=\"w\"> </span><span class=\"n\">build_tarballs</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">debug</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">verbose</span><span class=\"w\"> </span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span>\n</code></pre></div>\n<p>(I hope I got it all right typing on the phone). You can try it yourself without believing me on my word</p>",
        "id": 374453154,
        "sender_full_name": "Mosè Giordano",
        "timestamp": 1689119280
    },
    {
        "content": "<p>I changed now the Makefile by one generated by cmake, which seem to be more complete.</p>\n<p>Locally, I run the command you suggested above, with the <a href=\"https://github.com/JuliaPackaging/Yggdrasil/pull/7033/files#diff-51418465714d940f9301cdc46a1e1f673ee7d03bcc95a9fd6e90a61e247c3285\">the current script</a> and I don´t seem to get any error. </p>\n<p>There is some red stuff being printed, but at the end, what I get seems to indicate that everything ran fine here. </p>\n<p>The output of </p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">julia</span><span class=\"w\"> </span><span class=\"n\">build_tarballs</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">debug</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">verbose</span><span class=\"w\">  </span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span>\n</code></pre></div>\n<p>is, at the end, here:</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"p\">[</span><span class=\"mi\">22</span><span class=\"o\">:</span><span class=\"mi\">04</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">make</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Leaving</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"err\">'</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">srcdir</span><span class=\"o\">/</span><span class=\"n\">MDLovoFit</span><span class=\"o\">'</span>\n<span class=\"p\">[</span><span class=\"mi\">22</span><span class=\"o\">:</span><span class=\"mi\">04</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"mi\">100</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">mdlovofit</span>\n<span class=\"p\">[</span><span class=\"mi\">22</span><span class=\"o\">:</span><span class=\"mi\">04</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">make</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Leaving</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"err\">'</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">srcdir</span><span class=\"o\">/</span><span class=\"n\">MDLovoFit</span><span class=\"o\">'</span>\n<span class=\"p\">[</span><span class=\"mi\">22</span><span class=\"o\">:</span><span class=\"mi\">04</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">cmake</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">cmake_progress_start</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">srcdir</span><span class=\"o\">/</span><span class=\"n\">MDLovoFit</span><span class=\"o\">/</span><span class=\"n\">CMakeFiles</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"p\">[</span><span class=\"mi\">22</span><span class=\"o\">:</span><span class=\"mi\">04</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"p\">]</span><span class=\"w\">  </span><span class=\"o\">---&gt;</span><span class=\"w\"> </span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">Dvm</span><span class=\"w\"> </span><span class=\"mi\">755</span><span class=\"w\"> </span><span class=\"s\">\"./bin/mdlovofit${exeext}\"</span><span class=\"w\"> </span><span class=\"s\">\"${bindir}/mdlovofit${exeext}\"</span>\n<span class=\"p\">[</span><span class=\"mi\">22</span><span class=\"o\">:</span><span class=\"mi\">04</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"err\">'</span><span class=\"o\">./</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">mdlovofit</span><span class=\"o\">.</span><span class=\"n\">exe</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span><span class=\"w\"> </span><span class=\"err\">'</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">destdir</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">mdlovofit</span><span class=\"o\">.</span><span class=\"n\">exe</span><span class=\"o\">'</span>\n<span class=\"p\">[</span><span class=\"mi\">22</span><span class=\"o\">:</span><span class=\"mi\">04</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"p\">]</span><span class=\"w\">  </span><span class=\"o\">---&gt;</span><span class=\"w\"> </span><span class=\"n\">source</span><span class=\"w\"> </span><span class=\"s\">\"</span><span class=\"si\">$_script</span><span class=\"s\">\"</span>\n<span class=\"p\">[</span><span class=\"mi\">22</span><span class=\"o\">:</span><span class=\"mi\">04</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"p\">]</span><span class=\"w\">  </span><span class=\"o\">---&gt;</span><span class=\"w\"> </span><span class=\"n\">source</span><span class=\"w\"> </span><span class=\"s\">\"</span><span class=\"si\">$_script</span><span class=\"s\">\"</span>\n<span class=\"p\">[</span><span class=\"mi\">22</span><span class=\"o\">:</span><span class=\"mi\">04</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">Child</span><span class=\"w\"> </span><span class=\"n\">Process</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Beginning</span><span class=\"w\"> </span><span class=\"n\">audit</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">leandro</span><span class=\"o\">/</span><span class=\"n\">Downloads</span><span class=\"o\">/</span><span class=\"n\">lixo</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">/</span><span class=\"n\">IJF1fngi</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">-</span><span class=\"n\">cxx11</span><span class=\"o\">/</span><span class=\"n\">destdir</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">leandro</span><span class=\"o\">/</span><span class=\"n\">Downloads</span><span class=\"o\">/</span><span class=\"n\">lixo</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">/</span><span class=\"n\">IJF1fngi</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">-</span><span class=\"n\">cxx11</span><span class=\"o\">/</span><span class=\"n\">destdir</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">mdlovofit</span><span class=\"o\">.</span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">locks</span><span class=\"w\"> </span><span class=\"n\">us</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">libgfortran</span><span class=\"w\"> </span><span class=\"n\">v5</span><span class=\"mf\">.0.0</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Checking</span><span class=\"w\"> </span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">mdlovofit</span><span class=\"o\">.</span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"n\">RPath</span><span class=\"w\"> </span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"kt\">String</span><span class=\"p\">[]</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ignored</span><span class=\"w\"> </span><span class=\"n\">system</span><span class=\"w\"> </span><span class=\"n\">libraries</span><span class=\"w\"> </span><span class=\"n\">msvcrt</span><span class=\"o\">.</span><span class=\"n\">dll</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">libgfortran</span><span class=\"o\">-</span><span class=\"mf\">5.</span><span class=\"n\">dll</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">KERNEL32</span><span class=\"o\">.</span><span class=\"n\">dll</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Checking</span><span class=\"w\"> </span><span class=\"n\">license</span><span class=\"w\"> </span><span class=\"n\">file</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"n\">license</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LICENSE</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">leandro</span><span class=\"o\">/</span><span class=\"n\">Downloads</span><span class=\"o\">/</span><span class=\"n\">lixo</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">/</span><span class=\"n\">IJF1fngi</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">-</span><span class=\"n\">cxx11</span><span class=\"o\">/</span><span class=\"n\">destdir</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">mdlovofit</span><span class=\"o\">.</span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">matches</span><span class=\"w\"> </span><span class=\"n\">our</span><span class=\"w\"> </span><span class=\"n\">search</span><span class=\"w\"> </span><span class=\"n\">criteria</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s\">\"mdlovofit\"</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Compressing</span><span class=\"w\"> </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">leandro</span><span class=\"o\">/</span><span class=\"n\">Downloads</span><span class=\"o\">/</span><span class=\"n\">lixo</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">/</span><span class=\"n\">IJF1fngi</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">-</span><span class=\"n\">cxx11</span><span class=\"o\">/</span><span class=\"n\">destdir</span><span class=\"o\">/</span><span class=\"n\">logs</span><span class=\"o\">/</span><span class=\"n\">MDLovoFit</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tree</span><span class=\"w\"> </span><span class=\"n\">hash</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">contents</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">MDLovoFit</span><span class=\"o\">.</span><span class=\"n\">v20</span><span class=\"mf\">.0.4</span><span class=\"o\">.</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">.</span><span class=\"n\">tar</span><span class=\"o\">.</span><span class=\"n\">gz</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">332374e51</span><span class=\"n\">ae33478c41eea9273c52dd6c208a54d</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SHA256</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">MDLovoFit</span><span class=\"o\">.</span><span class=\"n\">v20</span><span class=\"mf\">.0.4</span><span class=\"o\">.</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">.</span><span class=\"n\">tar</span><span class=\"o\">.</span><span class=\"n\">gz</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">c3ae256c4cfaaa71aa3ee5c07cfd6bcf1c0859cd46f958ad551dcb38b02e17f</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tree</span><span class=\"w\"> </span><span class=\"n\">hash</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">contents</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">MDLovoFit</span><span class=\"o\">-</span><span class=\"n\">logs</span><span class=\"o\">.</span><span class=\"n\">v20</span><span class=\"mf\">.0.4</span><span class=\"o\">.</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">.</span><span class=\"n\">tar</span><span class=\"o\">.</span><span class=\"n\">gz</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">23484</span><span class=\"n\">ecad463a072bdb0275c4ca6e64bc4b0a0d9</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SHA256</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">MDLovoFit</span><span class=\"o\">-</span><span class=\"n\">logs</span><span class=\"o\">.</span><span class=\"n\">v20</span><span class=\"mf\">.0.4</span><span class=\"o\">.</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">w64</span><span class=\"o\">-</span><span class=\"n\">mingw32</span><span class=\"o\">-</span><span class=\"n\">libgfortran5</span><span class=\"o\">.</span><span class=\"n\">tar</span><span class=\"o\">.</span><span class=\"n\">gz</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b912978b27b276b846ab223e9faec19e0932cb00940054a13f39a807a9e5cd0d</span>\n<span class=\"p\">[</span><span class=\"w\"> </span><span class=\"n\">Info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Timings</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">setup</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">10.55</span><span class=\"n\">s</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">0.71</span><span class=\"n\">s</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">audit</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">4.49</span><span class=\"n\">s</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">packaging</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">0.67</span><span class=\"n\">s</span>\n</code></pre></div>\n<p>Seems that I don't have any error?</p>\n<p>The script, on the server, still fails for the same reasons. I guess the <code>install</code> line is still wrong (tried now to change it, I don't know if the <em>source</em> file must have <code>${exeext}</code> or not, so I'm trying all combinations I can guess (and still without being able to reproduce the same error here).</p>\n<p>I am really sorry for being so incapable here. For me this is like trying random stuff, I really don't have any clear understanding on how these things work.</p>",
        "id": 374465170,
        "sender_full_name": "Leandro Martínez",
        "timestamp": 1689124825
    },
    {
        "content": "<p>In any case the problem seems to be <strong>again</strong> in this line:</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">Dvm</span><span class=\"w\"> </span><span class=\"mi\">755</span><span class=\"w\"> </span><span class=\"s\">\"./bin/mdlovofit${exeext}\"</span><span class=\"w\"> </span><span class=\"s\">\"${bindir}/mdlovofit${exeext}\"</span>\n</code></pre></div>\n<p>Now that the Makefile creates a default binary, should that be changed to something else?</p>\n<p>The first path, that is <code>./bin/mdlovofit${exeext}</code> seems to be platform dependent, even within windows builds. In the last script I removed the first <code>${exeext}</code>, to read:</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">Dvm</span><span class=\"w\"> </span><span class=\"mi\">755</span><span class=\"w\"> </span><span class=\"s\">\"./bin/mdlovofit\"</span><span class=\"w\"> </span><span class=\"s\">\"${bindir}/mdlovofit${exeext}\"</span>\n</code></pre></div>\n<p>And one of the builds failed (the one that passes here, apparently). Should I still think about braching that code for that specific platform? Or the information of the Makefile now provides a more robust approach for that?</p>",
        "id": 374465952,
        "sender_full_name": "Leandro Martínez",
        "timestamp": 1689125221
    },
    {
        "content": "<p>After trying all possible combinations of install with and without ${exeext} on source and target files, I was only able to make all tests pass by moving the file \"manually\" to a common name, with:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\"> </span>-e<span class=\"w\"> </span>./bin/mdlovofit.exe<span class=\"w\"> </span><span class=\"o\">]</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span>mv<span class=\"w\"> </span>./bin/mdlovofit.exe<span class=\"w\"> </span>./bin/mdlovofit\n<span class=\"k\">fi</span>\ninstall<span class=\"w\"> </span>-Dvm<span class=\"w\"> </span><span class=\"m\">755</span><span class=\"w\"> </span><span class=\"s2\">\"./bin/mdlovofit\"</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"si\">${</span><span class=\"nv\">bindir</span><span class=\"si\">}</span><span class=\"s2\">/mdlovofit</span><span class=\"si\">${</span><span class=\"nv\">exeext</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n</code></pre></div>\n<p>I don´t know if this is a resonable solution. But it is the only thing I found made it work for all platforms.</p>",
        "id": 374470767,
        "sender_full_name": "Leandro Martínez",
        "timestamp": 1689127813
    },
    {
        "content": "<p>So, finally, with all the help from Mosè, this is what made all work, correctly:</p>\n<ol>\n<li>Replace the Makefile by a <code>CMakeLists.txt</code> and use <code>cmake</code> to build the software.</li>\n<li>Use the flags for <code>cmake</code> as indicated in the <a href=\"https://docs.binarybuilder.org/stable/build_tips/#CMake-builds\">documentation</a></li>\n<li>Use <code>make install</code> instead of <code>install -Dvm ... </code>.</li>\n</ol>\n<p>The final file resulted to be:</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"c\"># Note that this script can accept some limited command-line arguments, run</span>\n<span class=\"c\"># `julia build_tarballs.jl --help` to see a usage message.</span>\n<span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">BinaryBuilder</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Pkg</span>\n\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"MDLovoFit\"</span>\n<span class=\"n\">version</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"sa\">v</span><span class=\"s\">\"20.0.4\"</span>\n\n<span class=\"c\"># Collection of sources required to complete build</span>\n<span class=\"n\">sources</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[</span>\n<span class=\"w\">    </span><span class=\"n\">GitSource</span><span class=\"p\">(</span><span class=\"s\">\"https://github.com/m3g/MDLovoFit.git\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"e320c2a503c9bd88fe2dc102f2abfd0b2f5d4cce\"</span><span class=\"p\">)</span>\n<span class=\"p\">]</span>\n\n<span class=\"c\"># Bash recipe for building across all platforms</span>\n<span class=\"n\">script</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"sa\">raw</span><span class=\"s\">\"\"\"</span>\n<span class=\"s\">cd ${WORKSPACE}/srcdir/MDLovoFit</span>\n<span class=\"s\">install_license LICENSE</span>\n<span class=\"s\">mkdir build &amp;&amp; cd build</span>\n<span class=\"s\">cmake .. \\</span>\n<span class=\"s\">    -DCMAKE_INSTALL_PREFIX=${prefix} \\</span>\n<span class=\"s\">    -DCMAKE_TOOLCHAIN_FILE=${CMAKE_TARGET_TOOLCHAIN} \\</span>\n<span class=\"s\">    -DCMAKE_BUILD_TYPE=Release</span>\n<span class=\"s\">make -j${nproc}</span>\n<span class=\"s\">make install</span>\n<span class=\"s\">\"\"\"</span>\n\n<span class=\"c\"># These are the platforms we will build for by default, unless further</span>\n<span class=\"c\"># platforms are passed in on the command line</span>\n<span class=\"n\">platforms</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">supported_platforms</span><span class=\"p\">()</span>\n<span class=\"n\">platforms</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">expand_gfortran_versions</span><span class=\"p\">(</span><span class=\"n\">platforms</span><span class=\"p\">)</span>\n\n<span class=\"c\"># The products that we will ensure are always built</span>\n<span class=\"n\">products</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[</span>\n<span class=\"w\">    </span><span class=\"n\">ExecutableProduct</span><span class=\"p\">(</span><span class=\"s\">\"mdlovofit\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:mdlovofit</span><span class=\"p\">)</span>\n<span class=\"p\">]</span>\n\n<span class=\"c\"># Dependencies that must be installed before this package can be built</span>\n<span class=\"n\">dependencies</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Dependency</span><span class=\"p\">[</span>\n<span class=\"w\">    </span><span class=\"n\">Dependency</span><span class=\"p\">(</span><span class=\"n\">PackageSpec</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">\"CompilerSupportLibraries_jll\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">uuid</span><span class=\"o\">=</span><span class=\"s\">\"e66e0078-7015-5450-92f7-15fbd957f2ae\"</span><span class=\"p\">)),</span>\n<span class=\"p\">]</span>\n\n<span class=\"c\"># Build the tarballs, and possibly a `build.jl` as well.</span>\n<span class=\"n\">build_tarballs</span><span class=\"p\">(</span><span class=\"nb\">ARGS</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">sources</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">script</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">platforms</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">products</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">dependencies</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">julia_compat</span><span class=\"o\">=</span><span class=\"s\">\"1.6\"</span><span class=\"p\">)</span>\n</code></pre></div>",
        "id": 374548143,
        "sender_full_name": "Leandro Martínez",
        "timestamp": 1689154399
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"455681\">Leandro Martínez</span> has marked this topic as resolved.</p>",
        "id": 374548245,
        "sender_full_name": "Notification Bot",
        "timestamp": 1689154420
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"632417\">Francois Van Zyl</span> has marked this topic as unresolved.</p>",
        "id": 374880914,
        "sender_full_name": "Notification Bot",
        "timestamp": 1689244696
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"632417\">Francois Van Zyl</span> has marked this topic as resolved.</p>",
        "id": 374881150,
        "sender_full_name": "Notification Bot",
        "timestamp": 1689244749
    }
]