[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"269150\">@Mason Protter</span> <br>\nHow does the <br>\natreplinit() suggestion in the readme work ? </p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">atreplinit</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"n\">repl</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">try</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nd\">@eval</span><span class=\"w\"> </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">ReplMaker</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nd\">@async</span><span class=\"w\"> </span><span class=\"n\">initrepl</span><span class=\"p\">(</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"n\">apropos</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"n\">prompt_text</span><span class=\"o\">=</span><span class=\"s\">\"search&gt; \"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"n\">prompt_color</span><span class=\"o\">=</span><span class=\"ss\">:magenta</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"n\">start_key</span><span class=\"o\">=</span><span class=\"sc\">')'</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"n\">mode_name</span><span class=\"o\">=</span><span class=\"s\">\"search_mode\"</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"k\">catch</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"k\">end</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">end</span><span class=\"w\"></span>\n<span class=\"k\">end</span><span class=\"w\"></span>\n</code></pre></div>\n<p>what i dont understand is why it works with the @async .<br>\nwhile the _atreplinit is being executed in client.jl, the Base.active_repl is not defined right ?<br>\nwhy does then this work with @async ? is this sort of 'relying on a race condition` that Base.active_repl gets<br>\ndefined before that line in the async is reached ?</p>\n<p>edit: okay Base.active_repl isdefined , but not fully instantiated with interfaces and modes ,<br>\neither way my question is are we relying on them being instantiated before the @async tries to reach them ?</p>",
        "id": 284654149,
        "sender_full_name": "arbitrandomuser",
        "timestamp": 1654109532
    },
    {
        "content": "<p>, alright .. i dont understand this .. <br>\nsuppose i have this in my startup.jl ...</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">atreplinit</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"n\">repl</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nd\">@eval</span><span class=\"w\"> </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">ReplMaker</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nd\">@show</span><span class=\"w\"> </span><span class=\"n\">methods</span><span class=\"p\">(</span><span class=\"n\">initrepl</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"n\">initrepl</span><span class=\"p\">(</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"n\">apropos</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"n\">prompt_text</span><span class=\"o\">=</span><span class=\"s\">\"search&gt; \"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"n\">prompt_color</span><span class=\"o\">=</span><span class=\"ss\">:magenta</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"n\">start_key</span><span class=\"o\">=</span><span class=\"sc\">')'</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"n\">mode_name</span><span class=\"o\">=</span><span class=\"s\">\"search_mode\"</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">end</span><span class=\"w\"></span>\n</code></pre></div>\n<p>and then i start a repl . i get this error ..</p>\n<div class=\"codehilite\" data-code-language=\"Julia console\"><pre><span></span><code><span class=\"go\">└── julia</span>\n<span class=\"go\">               _</span>\n<span class=\"go\">   _       _ _(_)_     |  Documentation: https://docs.julialang.org</span>\n<span class=\"go\">  (_)     | (_) (_)    |</span>\n<span class=\"go\">   _ _   _| |_  __ _   |  Type \"?\" for help, \"]?\" for Pkg help.</span>\n<span class=\"go\">  | | | | | | |/ _` |  |</span>\n<span class=\"go\">  | | |_| | | | (_| |  |  Version 1.7.2 (2022-02-06)</span>\n<span class=\"go\"> _/ |\\__'_|_|_|\\__'_|  |  Official https://julialang.org/ release</span>\n<span class=\"go\">|__/                   |</span>\n\n<span class=\"go\">methods(initrepl) = # 1 method for generic function \"initrepl\":</span>\n<span class=\"go\">[1] initrepl(parser::Function; prompt_text, prompt_color, start_key, repl, mode_name, show_function, show_function_io, valid_input_checker, keymap, completion_provider, sticky_mode, startup_text) in ReplMaker at /home/antineutrino/.julia/packages/ReplMaker/ViCwA/src/ReplMaker.jl:42</span>\n<span class=\"go\">MethodError: no method matching initrepl(::typeof(apropos); prompt_text=\"search&gt; \", prompt_color=:magenta, start_key=')', mode_name=\"search_mode\")</span>\n<span class=\"go\">Closest candidates are:</span>\n<span class=\"go\">  initrepl(::Function; prompt_text, prompt_color, start_key, repl, mode_name, show_function, show_function_io, valid_input_checker, keymap, completion_provider, sticky_mode, startup_text) at ~/.julia/packages/ReplMaker/ViCwA/src/ReplMaker.jl:42</span>\n<span class=\"gp\">julia&gt;</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 284657657,
        "sender_full_name": "arbitrandomuser",
        "timestamp": 1654111310
    },
    {
        "content": "<p>that exact method exists , as shown by @show . but it still complains of no method matching .. closes candidates which is the same method <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 284657910,
        "sender_full_name": "arbitrandomuser",
        "timestamp": 1654111418
    },
    {
        "content": "<p>tl;dr , why the <code>@async</code></p>",
        "id": 284659228,
        "sender_full_name": "arbitrandomuser",
        "timestamp": 1654112090
    }
]