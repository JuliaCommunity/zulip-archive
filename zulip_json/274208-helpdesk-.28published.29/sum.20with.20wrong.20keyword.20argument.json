[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Julia console\"><pre><span></span><code><span class=\"gp\">julia&gt;</span><span class=\"w\"> </span><span class=\"n\">sum</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">dims</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"go\">6</span>\n\n<span class=\"gp\">julia&gt;</span><span class=\"w\"> </span><span class=\"n\">sum</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">dims</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"gr\">ERROR: MethodError: no method matching mapfoldl(::typeof(identity), ::typeof(Base.add_sum), ::Base.Generator{…}; dims::Tuple{…})</span>\n<span class=\"gr\">This method does not support all of the given keyword arguments (and may not support any).</span>\n\n<span class=\"gr\">Closest candidates are:</span>\n<span class=\"gr\">  mapfoldl(::Any, ::Any, ::Any; init) got unsupported keyword argument \"dims\"</span>\n<span class=\"gr\">   @ Base reduce.jl:167</span>\n\n<span class=\"gr\">Stacktrace:</span>\n<span class=\"gr\"> [1] kwerr(::@NamedTuple{…}, ::Function, ::Function, ::Function, ::Base.Generator{…})</span>\n<span class=\"gr\">   @ Base ./error.jl:175</span>\n<span class=\"gr\"> [2] mapreduce(f::Function, op::Function, itr::Base.Generator{UnitRange{…}, typeof(identity)}; kw::@Kwargs{dims::Tuple{…}})</span>\n<span class=\"gr\">   @ Base ./reduce.jl:299</span>\n<span class=\"gr\"> [3] sum(f::Function, a::Base.Generator{UnitRange{Int64}, typeof(identity)}; kw::@Kwargs{dims::Tuple{Int64, Int64}})</span>\n<span class=\"gr\">   @ Base ./reduce.jl:524</span>\n<span class=\"gr\"> [4] sum(a::Base.Generator{UnitRange{Int64}, typeof(identity)}; kw::@Kwargs{dims::Tuple{Int64, Int64}})</span>\n<span class=\"gr\">   @ Base ./reduce.jl:553</span>\n<span class=\"gr\"> [5] top-level scope</span>\n<span class=\"gr\">   @ REPL[2]:1</span>\n<span class=\"gr\">Some type information was truncated. Use `show(err)` to see complete types.</span>\n</code></pre></div>\n<p>Is this expected?</p>",
        "id": 555318625,
        "sender_full_name": "Karl Wessel",
        "timestamp": 1763029906
    },
    {
        "content": "<p>I would have expected that the first version throws the same error as the second.</p>",
        "id": 555318969,
        "sender_full_name": "Karl Wessel",
        "timestamp": 1763030011
    },
    {
        "content": "<p>Yes, it's expected. There's two separate parser quirks you need to know here:</p>\n<ol>\n<li><code>for i = 1:2</code> is another way to write <code>for i in 1:2</code> (and in fact the former is what the parser lowers to I think because Stefan always liked the <code>=</code> syntax more, not sure of the exact history):</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">julia</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">x</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"mi\">2</span><span class=\"o\">-</span><span class=\"n\">element</span><span class=\"w\"> </span><span class=\"kt\">Vector</span><span class=\"p\">{</span><span class=\"kt\">Int64</span><span class=\"p\">}</span><span class=\"o\">:</span>\n<span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\"> </span><span class=\"mi\">3</span>\n</code></pre></div>\n<ol start=\"2\">\n<li>Julia supports multidimensional comprehensions:</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">julia</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">[(</span><span class=\"n\">x</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"ss\">:a</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:b</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:c</span><span class=\"p\">)]</span>\n<span class=\"mi\">3</span><span class=\"o\">×</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"kt\">Matrix</span><span class=\"p\">{</span><span class=\"kt\">Tuple</span><span class=\"p\">{</span><span class=\"kt\">Int64</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kt\">Symbol</span><span class=\"p\">}}</span><span class=\"o\">:</span>\n<span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:a</span><span class=\"p\">)</span><span class=\"w\">  </span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:b</span><span class=\"p\">)</span><span class=\"w\">  </span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:c</span><span class=\"p\">)</span>\n<span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:a</span><span class=\"p\">)</span><span class=\"w\">  </span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:b</span><span class=\"p\">)</span><span class=\"w\">  </span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:c</span><span class=\"p\">)</span>\n<span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:a</span><span class=\"p\">)</span><span class=\"w\">  </span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:b</span><span class=\"p\">)</span><span class=\"w\">  </span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">:c</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>Putting that together, julia parses your first call as</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">generator</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">dims</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"n\">sum</span><span class=\"p\">(</span><span class=\"n\">generator</span><span class=\"p\">)</span>\n</code></pre></div>",
        "id": 555320397,
        "sender_full_name": "Mason Protter",
        "timestamp": 1763030378
    },
    {
        "content": "<p>Ahh, I did know about multidimensional comprehension, but did not notice that it could be parsed like that. Makes sense now.</p>",
        "id": 555322554,
        "sender_full_name": "Karl Wessel",
        "timestamp": 1763030974
    },
    {
        "content": "<p>Another reason why I really should use <code>;</code> instead of <code>,</code> to set keyword arguments :)</p>",
        "id": 555323293,
        "sender_full_name": "Karl Wessel",
        "timestamp": 1763031200
    },
    {
        "content": "<p>Yep. This is really the downside of julia having so much syntax. It's always nice to add special syntax for one more thing, but it does end up creating some pretty confusing edge cases</p>",
        "id": 555330293,
        "sender_full_name": "Mason Protter",
        "timestamp": 1763033309
    }
]