[
    {
        "content": "<p>Hi, I'm new to the language and I'm learning/experimenting on how to use tests in Julia</p>\n<p>The issue that I encounter when I run the tests under my environment like this</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"p\">(</span><span class=\"n\">testing</span><span class=\"o\">-</span><span class=\"n\">pluto</span><span class=\"p\">)</span> <span class=\"n\">pkg</span><span class=\"o\">&gt;</span> <span class=\"n\">test</span>\n</code></pre></div>\n<p>I get an error of failing precompilation of <code>Plots</code> that cascades from <code>libvorbis_jll -&gt; FFMPEG_jll  -&gt; FFMPEG  -&gt; Plots</code></p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">ERROR: LoadError: LoadError: ArgumentError: Package libvorbis_jll [e895b1f3-4dc4-43e3-88f4-b83e006265b7] is required but does not seem to be installed:</span>\n<span class=\"go\"> - Run `Pkg.instantiate()` to install all recorded dependencies.</span>\n<span class=\"go\">.</span>\n<span class=\"go\">.</span>\n<span class=\"go\">.</span>\n<span class=\"go\">  LoadError: Failed to precompile Plots [91a5bcdd-55d7-5caf-9e0b-520d859cae80] to /home/runner/.julia/compiled/v1.5/Plots/ld3vC_31teM.ji.</span>\n</code></pre></div>\n<p>What I don't understand is that I'm able to run the tests script if I just execute them as a regular script like with</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>julia --color<span class=\"o\">=</span>yes --check-bounds<span class=\"o\">=</span>yes  --depwarn<span class=\"o\">=</span>yes --project -e <span class=\"s1\">'cd(\"test\");include(\"runtests.jl\")'</span>\n</code></pre></div>\n<p>So is pretty clear that some other things happen when you execute the tests using <code>Pkg.test()</code> </p>\n<p>Can you explain what can be happening or point me where to learn about it? <br>\nSo I can try to fix it or file  an issue where it corresponds</p>\n<p>Thanks!</p>\n<p>For repro you can look at the code in<br>\n<a href=\"https://github.com/akielbowicz/testing_pluto/tree/add_tests\">here</a>, look at the <em>add_tests</em> branch.<br>\nAnd I set up two <a href=\"https://github.com/akielbowicz/testing_pluto/actions\">GH actions</a> so its possible to see the the full stack trace of both ways to execute the tests.</p>",
        "id": 228239388,
        "sender_full_name": "Sasha",
        "timestamp": 1614609060
    }
]