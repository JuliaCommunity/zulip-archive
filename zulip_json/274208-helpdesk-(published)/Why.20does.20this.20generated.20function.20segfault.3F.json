[
    {
        "content": "<p>I'm sure I'm just doing something stupid, but I'd appreciate some pointers as to what's going wrong here.</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">f</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"mi\">1</span>\n<span class=\"n\">f</span> <span class=\"p\">(</span><span class=\"n\">generic</span> <span class=\"k\">function</span> <span class=\"n\">with</span> <span class=\"mi\">1</span> <span class=\"n\">method</span><span class=\"p\">)</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"nd\">@generated</span> <span class=\"k\">function</span> <span class=\"n\">foo</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">x</span><span class=\"p\">)</span>\n           <span class=\"n\">ci_orig</span> <span class=\"o\">=</span> <span class=\"n\">ci</span> <span class=\"o\">=</span> <span class=\"n\">code_lowered</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"kt\">Any</span><span class=\"p\">,))[</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n           <span class=\"n\">ci</span> <span class=\"o\">=</span> <span class=\"k\">ccall</span><span class=\"p\">(</span><span class=\"o\">:</span><span class=\"n\">jl_copy_code_info</span><span class=\"p\">,</span> <span class=\"kt\">Ref</span><span class=\"p\">{</span><span class=\"n\">Core</span><span class=\"o\">.</span><span class=\"n\">CodeInfo</span><span class=\"p\">},</span> <span class=\"p\">(</span><span class=\"kt\">Any</span><span class=\"p\">,),</span> <span class=\"n\">ci_orig</span><span class=\"p\">)</span>\n           <span class=\"k\">return</span> <span class=\"n\">ci</span>\n       <span class=\"k\">end</span>\n<span class=\"n\">foo</span> <span class=\"p\">(</span><span class=\"n\">generic</span> <span class=\"k\">function</span> <span class=\"n\">with</span> <span class=\"mi\">1</span> <span class=\"n\">method</span><span class=\"p\">)</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">foo</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">Internal</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">encountered</span> <span class=\"n\">unexpected</span> <span class=\"n\">error</span> <span class=\"kp\">in</span> <span class=\"n\">runtime</span><span class=\"o\">:</span>\n<span class=\"kt\">BoundsError</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"o\">=</span><span class=\"kt\">Array</span><span class=\"p\">{</span><span class=\"n\">Core</span><span class=\"o\">.</span><span class=\"n\">Compiler</span><span class=\"o\">.</span><span class=\"n\">SlotInfo</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,)}[</span>\n  <span class=\"n\">Core</span><span class=\"o\">.</span><span class=\"n\">Compiler</span><span class=\"o\">.</span><span class=\"n\">SlotInfo</span><span class=\"p\">(</span><span class=\"n\">defs</span><span class=\"o\">=</span><span class=\"kt\">Array</span><span class=\"p\">{</span><span class=\"kt\">Int64</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,)}[],</span> <span class=\"n\">uses</span><span class=\"o\">=</span><span class=\"kt\">Array</span><span class=\"p\">{</span><span class=\"kt\">Int64</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,)}[],</span> <span class=\"n\">any_newvar</span><span class=\"o\">=</span><span class=\"kc\">false</span><span class=\"p\">),</span>\n  <span class=\"n\">Core</span><span class=\"o\">.</span><span class=\"n\">Compiler</span><span class=\"o\">.</span><span class=\"n\">SlotInfo</span><span class=\"p\">(</span><span class=\"n\">defs</span><span class=\"o\">=</span><span class=\"kt\">Array</span><span class=\"p\">{</span><span class=\"kt\">Int64</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,)}[],</span> <span class=\"n\">uses</span><span class=\"o\">=</span><span class=\"kt\">Array</span><span class=\"p\">{</span><span class=\"kt\">Int64</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,)}[],</span> <span class=\"n\">any_newvar</span><span class=\"o\">=</span><span class=\"kc\">false</span><span class=\"p\">)],</span> <span class=\"n\">i</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"n\">Core</span><span class=\"o\">.</span><span class=\"n\">Compiler</span><span class=\"o\">.</span><span class=\"kt\">UnitRange</span><span class=\"p\">{</span><span class=\"kt\">Int64</span><span class=\"p\">}(</span><span class=\"n\">start</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">stop</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">),))</span>\n<span class=\"n\">throw_boundserror</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">abstractarray</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">645</span>\n<span class=\"n\">checkbounds</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">abstractarray</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">610</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">getindex</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">array</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">807</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">scan_slot_def_use</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">compiler</span><span class=\"o\">/</span><span class=\"n\">ssair</span><span class=\"o\">/</span><span class=\"n\">slot2ssa</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">50</span>\n<span class=\"n\">slot2reg</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">compiler</span><span class=\"o\">/</span><span class=\"n\">ssair</span><span class=\"o\">/</span><span class=\"n\">driver</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">116</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">run_passes</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">compiler</span><span class=\"o\">/</span><span class=\"n\">ssair</span><span class=\"o\">/</span><span class=\"n\">driver</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">124</span>\n<span class=\"n\">optimize</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">compiler</span><span class=\"o\">/</span><span class=\"n\">optimize</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">272</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">_typeinf</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">compiler</span><span class=\"o\">/</span><span class=\"n\">typeinfer</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">244</span>\n<span class=\"n\">typeinf</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">compiler</span><span class=\"o\">/</span><span class=\"n\">typeinfer</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">209</span>\n<span class=\"n\">typeinf_ext</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">compiler</span><span class=\"o\">/</span><span class=\"n\">typeinfer</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">892</span>\n<span class=\"n\">typeinf_ext_toplevel</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">compiler</span><span class=\"o\">/</span><span class=\"n\">typeinfer</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">925</span>\n<span class=\"n\">typeinf_ext_toplevel</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">compiler</span><span class=\"o\">/</span><span class=\"n\">typeinfer</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">921</span>\n<span class=\"n\">jfptr_typeinf_ext_toplevel_11349</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">so</span> <span class=\"p\">(</span><span class=\"n\">unknown</span> <span class=\"n\">line</span><span class=\"p\">)</span>\n<span class=\"n\">jl_apply</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">.</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"mi\">1703</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">jl_type_infer</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">gf</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">298</span>\n<span class=\"n\">jl_generate_fptr</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">jitlayers</span><span class=\"o\">.</span><span class=\"n\">cpp</span><span class=\"o\">:</span><span class=\"mi\">340</span>\n<span class=\"n\">jl_compile_method_internal</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">gf</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">1971</span>\n<span class=\"n\">jl_compile_method_internal</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">gf</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">1925</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">_jl_invoke</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">gf</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">2230</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">jl_apply_generic</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">gf</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">2420</span>\n<span class=\"n\">jl_apply</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">.</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"mi\">1703</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">do_call</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">interpreter</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">115</span>\n<span class=\"n\">eval_value</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">interpreter</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">204</span>\n<span class=\"n\">eval_stmt_value</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">interpreter</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">155</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">eval_body</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">interpreter</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">561</span>\n<span class=\"n\">jl_interpret_toplevel_thunk</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">interpreter</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">669</span>\n<span class=\"n\">top</span><span class=\"o\">-</span><span class=\"n\">level</span> <span class=\"n\">scope</span> <span class=\"n\">at</span> <span class=\"n\">REPL</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span><span class=\"o\">:</span><span class=\"mi\">1</span>\n<span class=\"n\">jl_toplevel_eval_flex</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">toplevel</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">879</span>\n<span class=\"n\">jl_toplevel_eval_flex</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">toplevel</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">827</span>\n<span class=\"n\">jl_toplevel_eval_flex</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">toplevel</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">827</span>\n<span class=\"n\">jl_toplevel_eval_in</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">toplevel</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">931</span>\n<span class=\"n\">eval</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">boot</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">360</span>\n<span class=\"n\">eval_user_input</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">share</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">stdlib</span><span class=\"o\">/</span><span class=\"n\">v1</span><span class=\"o\">.</span><span class=\"mi\">6</span><span class=\"o\">/</span><span class=\"n\">REPL</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">REPL</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">139</span>\n<span class=\"n\">repl_backend_loop</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">share</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">stdlib</span><span class=\"o\">/</span><span class=\"n\">v1</span><span class=\"o\">.</span><span class=\"mi\">6</span><span class=\"o\">/</span><span class=\"n\">REPL</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">REPL</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">200</span>\n<span class=\"n\">start_repl_backend</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">share</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">stdlib</span><span class=\"o\">/</span><span class=\"n\">v1</span><span class=\"o\">.</span><span class=\"mi\">6</span><span class=\"o\">/</span><span class=\"n\">REPL</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">REPL</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">185</span>\n<span class=\"c\">#run_repl#42 at /home/mason/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:317</span>\n<span class=\"n\">run_repl</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">share</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">stdlib</span><span class=\"o\">/</span><span class=\"n\">v1</span><span class=\"o\">.</span><span class=\"mi\">6</span><span class=\"o\">/</span><span class=\"n\">REPL</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">REPL</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">305</span>\n<span class=\"c\">#878 at ./client.jl:387</span>\n<span class=\"n\">jfptr_YY</span><span class=\"o\">.</span><span class=\"mi\">878_41186</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">so</span> <span class=\"p\">(</span><span class=\"n\">unknown</span> <span class=\"n\">line</span><span class=\"p\">)</span>\n<span class=\"n\">jl_apply</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">.</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"mi\">1703</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">do_apply</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">builtins</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">672</span>\n<span class=\"n\">jl_f__apply_latest</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">builtins</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">722</span>\n<span class=\"c\">#invokelatest#2 at ./essentials.jl:707 [inlined]</span>\n<span class=\"n\">invokelatest</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">essentials</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">706</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">run_main_repl</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">372</span>\n<span class=\"n\">exec_options</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">302</span>\n<span class=\"n\">_start</span> <span class=\"n\">at</span> <span class=\"o\">./</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">485</span>\n<span class=\"n\">jfptr__start_38985</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">so</span> <span class=\"p\">(</span><span class=\"n\">unknown</span> <span class=\"n\">line</span><span class=\"p\">)</span>\n<span class=\"n\">jl_apply</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">.</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"mi\">1703</span> <span class=\"p\">[</span><span class=\"n\">inlined</span><span class=\"p\">]</span>\n<span class=\"n\">true_main</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">jlapi</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">557</span>\n<span class=\"n\">repl_entrypoint</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">jlapi</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">699</span>\n<span class=\"n\">main</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">cli</span><span class=\"o\">/</span><span class=\"n\">loader_exe</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">51</span>\n<span class=\"n\">__libc_start_main</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">libc</span><span class=\"o\">.</span><span class=\"n\">so</span><span class=\"o\">.</span><span class=\"mi\">6</span> <span class=\"p\">(</span><span class=\"n\">unknown</span> <span class=\"n\">line</span><span class=\"p\">)</span>\n<span class=\"n\">_start</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/./</span><span class=\"n\">julia</span> <span class=\"p\">(</span><span class=\"n\">unknown</span> <span class=\"n\">line</span><span class=\"p\">)</span>\n<span class=\"n\">julia</span><span class=\"o\">:</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">julia</span><span class=\"o\">.</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"mi\">923</span><span class=\"o\">:</span> <span class=\"n\">jl_value_t</span><span class=\"o\">*</span> <span class=\"n\">jl_array_ptr_ref</span><span class=\"p\">(</span><span class=\"n\">void</span><span class=\"o\">*</span><span class=\"p\">,</span> <span class=\"n\">size_t</span><span class=\"p\">)</span><span class=\"o\">:</span> <span class=\"n\">Assertion</span> <span class=\"sb\">`i &lt; jl_array_len(a)' failed.</span>\n\n<span class=\"sb\">signal (6): Aborted</span>\n<span class=\"sb\">in expression starting at REPL[3]:1</span>\n<span class=\"sb\">gsignal at /usr/lib/libc.so.6 (unknown line)</span>\n<span class=\"sb\">abort at /usr/lib/libc.so.6 (unknown line)</span>\n<span class=\"sb\">__assert_fail_base.cold at /usr/lib/libc.so.6 (unknown line)</span>\n<span class=\"sb\">__assert_fail at /usr/lib/libc.so.6 (unknown line)</span>\n<span class=\"sb\">jl_array_ptr_ref at /home/mason/julia/src/julia.h:923 [inlined]</span>\n<span class=\"sb\">jl_array_ptr_ref at /home/mason/julia/src/julia.h:920 [inlined]</span>\n<span class=\"sb\">emit_function at /home/mason/julia/src/codegen.cpp:5833</span>\n<span class=\"sb\">jl_emit_code at /home/mason/julia/src/codegen.cpp:7185</span>\n<span class=\"sb\">jl_emit_codeinst at /home/mason/julia/src/codegen.cpp:7230</span>\n<span class=\"sb\">_jl_compile_codeinst at /home/mason/julia/src/jitlayers.cpp:124</span>\n<span class=\"sb\">jl_generate_fptr_for_unspecialized at /home/mason/julia/src/jitlayers.cpp:396</span>\n<span class=\"sb\">jl_compile_method_internal at /home/mason/julia/src/gf.c:1977</span>\n<span class=\"sb\">jl_compile_method_internal at /home/mason/julia/src/gf.c:1925 [inlined]</span>\n<span class=\"sb\">_jl_invoke at /home/mason/julia/src/gf.c:2230 [inlined]</span>\n<span class=\"sb\">jl_apply_generic at /home/mason/julia/src/gf.c:2420</span>\n<span class=\"sb\">jl_apply at /home/mason/julia/src/julia.h:1703 [inlined]</span>\n<span class=\"sb\">do_call at /home/mason/julia/src/interpreter.c:115</span>\n<span class=\"sb\">eval_value at /home/mason/julia/src/interpreter.c:204</span>\n<span class=\"sb\">eval_stmt_value at /home/mason/julia/src/interpreter.c:155 [inlined]</span>\n<span class=\"sb\">eval_body at /home/mason/julia/src/interpreter.c:561</span>\n<span class=\"sb\">jl_interpret_toplevel_thunk at /home/mason/julia/src/interpreter.c:669</span>\n<span class=\"sb\">jl_toplevel_eval_flex at /home/mason/julia/src/toplevel.c:879</span>\n<span class=\"sb\">jl_toplevel_eval_flex at /home/mason/julia/src/toplevel.c:827</span>\n<span class=\"sb\">jl_toplevel_eval_flex at /home/mason/julia/src/toplevel.c:827</span>\n<span class=\"sb\">jl_toplevel_eval_in at /home/mason/julia/src/toplevel.c:931</span>\n<span class=\"sb\">eval at ./boot.jl:360</span>\n<span class=\"sb\">eval_user_input at /home/mason/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:139</span>\n<span class=\"sb\">repl_backend_loop at /home/mason/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:200</span>\n<span class=\"sb\">start_repl_backend at /home/mason/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:185</span>\n<span class=\"sb\">#run_repl#42 at /home/mason/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:317</span>\n<span class=\"sb\">run_repl at /home/mason/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:305</span>\n<span class=\"sb\">#878 at ./client.jl:387</span>\n<span class=\"sb\">jfptr_YY.878_41186 at /home/mason/julia/usr/lib/julia/sys.so (unknown line)</span>\n<span class=\"sb\">jl_apply at /home/mason/julia/src/julia.h:1703 [inlined]</span>\n<span class=\"sb\">do_apply at /home/mason/julia/src/builtins.c:672</span>\n<span class=\"sb\">jl_f__apply_latest at /home/mason/julia/src/builtins.c:722</span>\n<span class=\"sb\">#invokelatest#2 at ./essentials.jl:707 [inlined]</span>\n<span class=\"sb\">invokelatest at ./essentials.jl:706 [inlined]</span>\n<span class=\"sb\">run_main_repl at ./client.jl:372</span>\n<span class=\"sb\">exec_options at ./client.jl:302</span>\n<span class=\"sb\">_start at ./client.jl:485</span>\n<span class=\"sb\">jfptr__start_38985 at /home/mason/julia/usr/lib/julia/sys.so (unknown line)</span>\n<span class=\"sb\">jl_apply at /home/mason/julia/src/julia.h:1703 [inlined]</span>\n<span class=\"sb\">true_main at /home/mason/julia/src/jlapi.c:557</span>\n<span class=\"sb\">repl_entrypoint at /home/mason/julia/src/jlapi.c:699</span>\n<span class=\"sb\">main at /home/mason/julia/cli/loader_exe.c:51</span>\n<span class=\"sb\">__libc_start_main at /usr/lib/libc.so.6 (unknown line)</span>\n<span class=\"sb\">_start at /home/mason/julia/./julia (unknown line)</span>\n<span class=\"sb\">Allocations: 2062789 (Pool: 2061837; Big: 952); GC: 3</span>\n<span class=\"sb\">Aborted (core dumped)</span>\n</code></pre></div>",
        "id": 226761827,
        "sender_full_name": "Mason Protter",
        "timestamp": 1613620593
    },
    {
        "content": "<p>I'm trying to do the equivalent of <code>IRTools.func</code> without needing IRTools but I don't understand why it's not working.</p>",
        "id": 226761926,
        "sender_full_name": "Mason Protter",
        "timestamp": 1613620698
    },
    {
        "content": "<p>Don't you need <code>@generated function foo(x)</code> instead of <code>foo(_, x)</code>?  Or, if you want to change the arity (i.e., create a ci for 2-arg function <code>foo(f, x)</code> from 1-arg function <code>f(x)</code>), I guess you can do it by mutating <code>ci</code>?</p>",
        "id": 226771907,
        "sender_full_name": "Takafumi Arakaki (tkf)",
        "timestamp": 1613631564
    },
    {
        "content": "<p>I have no idea and could unsurprisingly be wrong, but it looks like <code>ci</code> and <code>ci_orig</code> are not only initialized to the same value, they <em>are</em> the same objects so modifying one will modify the other (ignore me if that is intended).</p>",
        "id": 226772024,
        "sender_full_name": "Eric Forgy",
        "timestamp": 1613631678
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"297129\">Takafumi Arakaki (tkf)</span> <a href=\"#narrow/stream/274208-helpdesk-(published)/topic/Why.20does.20this.20generated.20function.20segfault.3F/near/226771907\">said</a>:</p>\n<blockquote>\n<p>Don't you need <code>@generated function foo(x)</code> instead of <code>foo(_, x)</code>?  Or, if you want to change the arity (i.e., create a ci for 2-arg function <code>foo(f, x)</code> from 1-arg function <code>f(x)</code>), I guess you can do it by mutating <code>ci</code>?</p>\n</blockquote>\n<p>Ohh, I didn't even think about this. In <a href=\"https://github.com/search?q=IRTools.jl&amp;type=Repositories\">IRTools.jl</a> you need to add an extra argument for the <code>self</code> slot if you do something similar. I guess Julia is smart enough with it's own CodeInfo object that this isn't necessary</p>",
        "id": 226848200,
        "sender_full_name": "Mason Protter",
        "timestamp": 1613669544
    },
    {
        "content": "<p>You can also manually add slots to CodeInfo, but if you just copy it, it will of course give you the same number of slots as the function you copy it from.</p>",
        "id": 226879376,
        "sender_full_name": "Simeon Schaub",
        "timestamp": 1613681896
    },
    {
        "content": "<p>I didn't want to add slots, I thought I <em>needed</em> to add an argument to <code>foo</code> in order to account for the internal <code>#self#</code> slot in the CodeInfo, but I was mistaken</p>",
        "id": 226880842,
        "sender_full_name": "Mason Protter",
        "timestamp": 1613682452
    },
    {
        "content": "<p>e.g.</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">ci</span> <span class=\"o\">=</span> <span class=\"n\">code_lowered</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"kt\">Any</span><span class=\"p\">,))[</span><span class=\"mi\">1</span><span class=\"p\">];</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">ci</span><span class=\"o\">.</span><span class=\"n\">slotnames</span>\n<span class=\"mi\">2</span><span class=\"o\">-</span><span class=\"n\">element</span> <span class=\"kt\">Vector</span><span class=\"p\">{</span><span class=\"kt\">Symbol</span><span class=\"p\">}</span><span class=\"o\">:</span>\n <span class=\"kt\">Symbol</span><span class=\"p\">(</span><span class=\"s\">\"#self#\"</span><span class=\"p\">)</span>\n <span class=\"o\">:</span><span class=\"n\">x</span>\n</code></pre></div>",
        "id": 226881060,
        "sender_full_name": "Mason Protter",
        "timestamp": 1613682541
    },
    {
        "content": "<p>I was just thrown off because it's different from <code>IRTools.func</code></p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"k\">using</span> <span class=\"n\">IRTools</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">ir</span> <span class=\"o\">=</span> <span class=\"n\">IRTools</span><span class=\"o\">.</span><span class=\"nd\">@code_ir</span> <span class=\"n\">f</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"mi\">1</span><span class=\"o\">:</span> <span class=\"p\">(</span><span class=\"o\">%</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">%</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n  <span class=\"o\">%</span><span class=\"mi\">3</span> <span class=\"o\">=</span> <span class=\"o\">%</span><span class=\"mi\">2</span> <span class=\"o\">+</span> <span class=\"mi\">1</span>\n  <span class=\"k\">return</span> <span class=\"o\">%</span><span class=\"mi\">3</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">g</span> <span class=\"o\">=</span> <span class=\"n\">IRTools</span><span class=\"o\">.</span><span class=\"n\">func</span><span class=\"p\">(</span><span class=\"n\">ir</span><span class=\"p\">)</span>\n<span class=\"c\">##280 (generic function with 1 method)</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">methods</span><span class=\"p\">(</span><span class=\"n\">g</span><span class=\"p\">)</span>\n<span class=\"c\"># 1 method for generic function \"##280\":</span>\n<span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"n\">var</span><span class=\"s\">\"##280\"</span><span class=\"p\">(</span><span class=\"n\">arg1</span><span class=\"p\">,</span> <span class=\"n\">arg2</span><span class=\"p\">)</span> <span class=\"kp\">in</span> <span class=\"n\">IRTools</span><span class=\"o\">.</span><span class=\"n\">Inner</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">mason</span><span class=\"o\">/.</span><span class=\"n\">julia</span><span class=\"o\">/</span><span class=\"n\">packages</span><span class=\"o\">/</span><span class=\"n\">IRTools</span><span class=\"o\">/</span><span class=\"n\">aSVI5</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">eval</span><span class=\"o\">.</span><span class=\"n\">jl</span><span class=\"o\">:</span><span class=\"mi\">18</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">g</span><span class=\"p\">(</span><span class=\"n\">g</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"mi\">2</span>\n</code></pre></div>",
        "id": 226882181,
        "sender_full_name": "Mason Protter",
        "timestamp": 1613682977
    },
    {
        "content": "<p>Maybe a MWE for the OP is something like this (though it's incomplete)</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"nd\">@generated</span> <span class=\"k\">function</span> <span class=\"n\">foo</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">,</span> <span class=\"n\">x</span><span class=\"p\">)</span>\n    <span class=\"n\">ci</span><span class=\"p\">,</span> <span class=\"o\">=</span> <span class=\"n\">code_lowered</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">instance</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,))</span>\n    <span class=\"n\">ci</span> <span class=\"o\">=</span> <span class=\"k\">ccall</span><span class=\"p\">(</span><span class=\"o\">:</span><span class=\"n\">jl_copy_code_info</span><span class=\"p\">,</span> <span class=\"kt\">Ref</span><span class=\"p\">{</span><span class=\"n\">Core</span><span class=\"o\">.</span><span class=\"n\">CodeInfo</span><span class=\"p\">},</span> <span class=\"p\">(</span><span class=\"kt\">Any</span><span class=\"p\">,),</span> <span class=\"n\">ci</span><span class=\"p\">)</span>\n    <span class=\"k\">for</span> <span class=\"n\">c</span> <span class=\"kp\">in</span> <span class=\"n\">ci</span><span class=\"o\">.</span><span class=\"n\">code</span>\n        <span class=\"n\">c</span> <span class=\"kp\">isa</span> <span class=\"kt\">Expr</span> <span class=\"o\">||</span> <span class=\"k\">continue</span>\n        <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">)</span> <span class=\"kp\">in</span> <span class=\"n\">pairs</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">)</span>\n            <span class=\"k\">if</span> <span class=\"n\">a</span> <span class=\"kp\">isa</span> <span class=\"n\">Core</span><span class=\"o\">.</span><span class=\"n\">SlotNumber</span> <span class=\"o\">&amp;&amp;</span> <span class=\"n\">a</span><span class=\"o\">.</span><span class=\"n\">id</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1</span>\n                <span class=\"n\">c</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">Core</span><span class=\"o\">.</span><span class=\"n\">SlotNumber</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"o\">.</span><span class=\"n\">id</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n            <span class=\"k\">end</span>\n        <span class=\"k\">end</span>\n    <span class=\"k\">end</span>\n    <span class=\"n\">insert!</span><span class=\"p\">(</span><span class=\"n\">ci</span><span class=\"o\">.</span><span class=\"n\">slotnames</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"kt\">Symbol</span><span class=\"p\">(</span><span class=\"s\">\"#f#\"</span><span class=\"p\">))</span>\n    <span class=\"n\">insert!</span><span class=\"p\">(</span><span class=\"n\">ci</span><span class=\"o\">.</span><span class=\"n\">slotflags</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mh\">0x00</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">ci</span>\n<span class=\"k\">end</span>\n</code></pre></div>",
        "id": 226894937,
        "sender_full_name": "Takafumi Arakaki (tkf)",
        "timestamp": 1613688219
    },
    {
        "content": "<p>Again, I did <em>not</em> want to add slots! Your first suggestion was correct. All I needed to do was remove that extra argument</p>",
        "id": 226895861,
        "sender_full_name": "Mason Protter",
        "timestamp": 1613688738
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">f</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"mi\">1</span>\n<span class=\"n\">f</span> <span class=\"p\">(</span><span class=\"n\">generic</span> <span class=\"k\">function</span> <span class=\"n\">with</span> <span class=\"mi\">1</span> <span class=\"n\">method</span><span class=\"p\">)</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"nd\">@generated</span> <span class=\"k\">function</span> <span class=\"n\">foo</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n           <span class=\"n\">ci_orig</span> <span class=\"o\">=</span> <span class=\"n\">ci</span> <span class=\"o\">=</span> <span class=\"n\">code_lowered</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"kt\">Any</span><span class=\"p\">,))[</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n           <span class=\"n\">ci</span> <span class=\"o\">=</span> <span class=\"k\">ccall</span><span class=\"p\">(</span><span class=\"o\">:</span><span class=\"n\">jl_copy_code_info</span><span class=\"p\">,</span> <span class=\"kt\">Ref</span><span class=\"p\">{</span><span class=\"n\">Core</span><span class=\"o\">.</span><span class=\"n\">CodeInfo</span><span class=\"p\">},</span> <span class=\"p\">(</span><span class=\"kt\">Any</span><span class=\"p\">,),</span> <span class=\"n\">ci_orig</span><span class=\"p\">)</span>\n           <span class=\"k\">return</span> <span class=\"n\">ci</span>\n       <span class=\"k\">end</span>\n<span class=\"n\">foo</span> <span class=\"p\">(</span><span class=\"n\">generic</span> <span class=\"k\">function</span> <span class=\"n\">with</span> <span class=\"mi\">1</span> <span class=\"n\">method</span><span class=\"p\">)</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">foo</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"mi\">2</span>\n</code></pre></div>\n<p>is exactly what I wanted to do</p>",
        "id": 226895947,
        "sender_full_name": "Mason Protter",
        "timestamp": 1613688791
    }
]