[
    {
        "content": "<p>I've been running into issues with <a href=\"https://github.com/search?q=WignerSymbols.jl&amp;type=Repositories\">WignerSymbols.jl</a>, where one of the necessary operations is calculating the prime factorization of certain numbers. To speed this up you'd want to cache any found prime factors, and this cache is exactly what makes it thread unsafe.</p>\n<p>As far as I can tell, there are 2 options. Either work with a lock, but that would slow down the existing code, even in situations where it was already called in a threadsafe way. The other way would be to work with thread-local caches (someone tried this <a href=\"https://github.com/Jutho/WignerSymbols.jl/pull/13\">https://github.com/Jutho/WignerSymbols.jl/pull/13</a> but memory consumption gets out of hand).</p>\n<p>Ideally you would have some array type, for which getindex is fast, and as long as this index is &lt; length(array), it is garantueed to be threadsafe. Modifying the array is allowed to be slower (getting a lock or something). I think a normal array does not have this property, because push! may cause the entire array to be re-allocated somewhere.</p>\n<p>I have a few questions :</p>\n<ul>\n<li>\n<p>is there a list of thread safe array operations?</p>\n</li>\n<li>\n<p>what kind of caching mechanism should I go for?</p>\n</li>\n<li>\n<p>can I make my \"ideal\" array type somehow?</p>\n</li>\n</ul>",
        "id": 240926346,
        "sender_full_name": "Maarten",
        "timestamp": 1622546165
    }
]